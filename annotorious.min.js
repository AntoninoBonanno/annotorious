function f(){return function(){}}function m(a){return function(){return this[a]}}function aa(a){return function(){return a}}var n,p=this;function ba(a,b){var c=a.split("."),d=p;c[0]in d||!d.execScript||d.execScript("var "+c[0]);for(var e;c.length&&(e=c.shift());)c.length||void 0===b?d=d[e]?d[e]:d[e]={}:d[e]=b}function ca(){}function da(a){a.ec=function(){return a.ke?a.ke:a.ke=new a}}
function fa(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==b&&"undefined"==typeof a.call)return"object";return b}function ga(a){return"array"==fa(a)}function ha(a){var b=fa(a);return"array"==b||"object"==b&&"number"==typeof a.length}function q(a){return"string"==typeof a}function r(a){return"function"==fa(a)}function ia(a){var b=typeof a;return"object"==b&&null!=a||"function"==b}function ja(a){return a[ka]||(a[ka]=++ma)}var ka="closure_uid_"+(1E9*Math.random()>>>0),ma=0;function na(a,b,c){return a.call.apply(a.bind,arguments)}
function oa(a,b,c){if(!a)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}}function pa(a,b,c){pa=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?na:oa;return pa.apply(null,arguments)}
function qa(a,b){var c=Array.prototype.slice.call(arguments,1);return function(){var b=Array.prototype.slice.call(arguments);b.unshift.apply(b,c);return a.apply(this,b)}}var ra=Date.now||function(){return+new Date};function t(a,b){function c(){}c.prototype=b.prototype;a.G=b.prototype;a.prototype=new c;a.prototype.constructor=a};function sa(a){return a.replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")}function ta(a){if(!ua.test(a))return a;-1!=a.indexOf("\x26")&&(a=a.replace(va,"\x26amp;"));-1!=a.indexOf("\x3c")&&(a=a.replace(wa,"\x26lt;"));-1!=a.indexOf("\x3e")&&(a=a.replace(xa,"\x26gt;"));-1!=a.indexOf('"')&&(a=a.replace(ya,"\x26quot;"));return a}var va=/&/g,wa=/</g,xa=/>/g,ya=/\"/g,ua=/[&<>\"]/;function za(a){return String(a).replace(/\-([a-z])/g,function(a,c){return c.toUpperCase()})}
function Aa(a){var b=q(void 0)?"undefined".replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08"):"\\s";return a.replace(RegExp("(^"+(b?"|["+b+"]+":"")+")([a-z])","g"),function(a,b,e){return b+e.toUpperCase()})};var x=Array.prototype,Ba=x.indexOf?function(a,b,c){return x.indexOf.call(a,b,c)}:function(a,b,c){c=null==c?0:0>c?Math.max(0,a.length+c):c;if(q(a))return q(b)&&1==b.length?a.indexOf(b,c):-1;for(;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1},y=x.forEach?function(a,b,c){x.forEach.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=q(a)?a.split(""):a,g=0;g<d;g++)g in e&&b.call(c,e[g],g,a)},Ca=x.filter?function(a,b,c){return x.filter.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=[],g=0,h=q(a)?
a.split(""):a,k=0;k<d;k++)if(k in h){var l=h[k];b.call(c,l,k,a)&&(e[g++]=l)}return e},Da=x.map?function(a,b,c){return x.map.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=Array(d),g=q(a)?a.split(""):a,h=0;h<d;h++)h in g&&(e[h]=b.call(c,g[h],h,a));return e},Ea=x.every?function(a,b,c){return x.every.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=q(a)?a.split(""):a,g=0;g<d;g++)if(g in e&&!b.call(c,e[g],g,a))return!1;return!0};
function Fa(a,b){var c;a:{c=a.length;for(var d=q(a)?a.split(""):a,e=0;e<c;e++)if(e in d&&b.call(void 0,d[e],e,a)){c=e;break a}c=-1}return 0>c?null:q(a)?a.charAt(c):a[c]}function Ga(a,b){return 0<=Ba(a,b)}function z(a,b){var c=Ba(a,b),d;(d=0<=c)&&x.splice.call(a,c,1);return d}function Ha(a){var b=a.length;if(0<b){for(var c=Array(b),d=0;d<b;d++)c[d]=a[d];return c}return[]}
function Ia(a,b){for(var c=1;c<arguments.length;c++){var d=arguments[c],e;if(ga(d)||(e=ha(d))&&Object.prototype.hasOwnProperty.call(d,"callee"))a.push.apply(a,d);else if(e)for(var g=a.length,h=d.length,k=0;k<h;k++)a[g+k]=d[k];else a.push(d)}}function Ja(a,b,c){return 2>=arguments.length?x.slice.call(a,b):x.slice.call(a,b,c)}function Ka(a,b){x.sort.call(a,b||La)}function La(a,b){return a>b?1:a<b?-1:0};var Ma,Na,Oa,Pa,Sa;function Ta(){return p.navigator?p.navigator.userAgent:null}function Ua(){return p.navigator}Pa=Oa=Na=Ma=!1;var Va;if(Va=Ta()){var Wa=Ua();Ma=0==Va.lastIndexOf("Opera",0);Na=!Ma&&(-1!=Va.indexOf("MSIE")||-1!=Va.indexOf("Trident"));Oa=!Ma&&-1!=Va.indexOf("WebKit");Pa=!Ma&&!Oa&&!Na&&"Gecko"==Wa.product}var B=Ma,C=Na,D=Pa,E=Oa,Xa=Ua();Sa=-1!=(Xa&&Xa.platform||"").indexOf("Mac");var Ya=!!Ua()&&-1!=(Ua().appVersion||"").indexOf("X11");
function Za(){var a=p.document;return a?a.documentMode:void 0}var $a;a:{var ab="",bb;if(B&&p.opera)var cb=p.opera.version,ab="function"==typeof cb?cb():cb;else if(D?bb=/rv\:([^\);]+)(\)|;)/:C?bb=/\b(?:MSIE|rv)\s+([^\);]+)(\)|;)/:E&&(bb=/WebKit\/(\S+)/),bb)var db=bb.exec(Ta()),ab=db?db[1]:"";if(C){var eb=Za();if(eb>parseFloat(ab)){$a=String(eb);break a}}$a=ab}var fb={};
function F(a){var b;if(!(b=fb[a])){b=0;for(var c=sa(String($a)).split("."),d=sa(String(a)).split("."),e=Math.max(c.length,d.length),g=0;0==b&&g<e;g++){var h=c[g]||"",k=d[g]||"",l=RegExp("(\\d*)(\\D*)","g"),s=RegExp("(\\d*)(\\D*)","g");do{var w=l.exec(h)||["","",""],u=s.exec(k)||["","",""];if(0==w[0].length&&0==u[0].length)break;b=((0==w[1].length?0:parseInt(w[1],10))<(0==u[1].length?0:parseInt(u[1],10))?-1:(0==w[1].length?0:parseInt(w[1],10))>(0==u[1].length?0:parseInt(u[1],10))?1:0)||((0==w[2].length)<
(0==u[2].length)?-1:(0==w[2].length)>(0==u[2].length)?1:0)||(w[2]<u[2]?-1:w[2]>u[2]?1:0)}while(0==b)}b=fb[a]=0<=b}return b}var gb=p.document,hb=gb&&C?Za()||("CSS1Compat"==gb.compatMode?parseInt($a,10):5):void 0;var lb,mb=!C||C&&9<=hb;!D&&!C||C&&C&&9<=hb||D&&F("1.9.1");C&&F("9");var nb=C||B||E;function ob(a){a=a.className;return q(a)&&a.match(/\S+/g)||[]}function pb(a,b){var c=ob(a),d=Ja(arguments,1),e=c.length+d.length;qb(c,d);a.className=c.join(" ");return c.length==e}function rb(a,b){var c=ob(a),d=Ja(arguments,1),e=sb(c,d);a.className=e.join(" ");return e.length==c.length-d.length}function qb(a,b){for(var c=0;c<b.length;c++)Ga(a,b[c])||a.push(b[c])}function sb(a,b){return Ca(a,function(a){return!Ga(b,a)})}
function tb(a,b,c){var d=ob(a);q(b)?z(d,b):ga(b)&&(d=sb(d,b));q(c)&&!Ga(d,c)?d.push(c):ga(c)&&qb(d,c);a.className=d.join(" ")};function G(a,b){this.x=void 0!==a?a:0;this.y=void 0!==b?b:0}G.prototype.round=function(){this.x=Math.round(this.x);this.y=Math.round(this.y);return this};function ub(a,b){this.width=a;this.height=b}ub.prototype.round=function(){this.width=Math.round(this.width);this.height=Math.round(this.height);return this};function vb(a,b){for(var c in a)b.call(void 0,a[c],c,a)}var wb="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function xb(a,b){for(var c,d,e=1;e<arguments.length;e++){d=arguments[e];for(c in d)a[c]=d[c];for(var g=0;g<wb.length;g++)c=wb[g],Object.prototype.hasOwnProperty.call(d,c)&&(a[c]=d[c])}};function yb(a){return a?new zb(H(a)):lb||(lb=new zb)}function Ab(){var a=document;a.querySelectorAll&&a.querySelector?a=a.querySelector(".openseadragon-container"):(a=document,a=(a.querySelectorAll&&a.querySelector?a.querySelectorAll(".openseadragon-container"):a.getElementsByClassName?a.getElementsByClassName("openseadragon-container"):Bb())[0]);return a||null}
function Bb(){var a,b,c,d;a=document;if(a.querySelectorAll&&a.querySelector)return a.querySelectorAll(".openseadragon-container");if(a.getElementsByClassName){var e=a.getElementsByClassName("openseadragon-container");return e}e=a.getElementsByTagName("*");d={};for(b=c=0;a=e[b];b++){var g=a.className;"function"==typeof g.split&&Ga(g.split(/\s+/),"openseadragon-container")&&(d[c++]=a)}d.length=c;return d}
function Cb(a,b){vb(b,function(b,d){"style"==d?a.style.cssText=b:"class"==d?a.className=b:"for"==d?a.htmlFor=b:d in Db?a.setAttribute(Db[d],b):0==d.lastIndexOf("aria-",0)||0==d.lastIndexOf("data-",0)?a.setAttribute(d,b):a[d]=b})}var Db={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};
function Eb(a,b,c){var d=arguments,e=document,g=d[0],h=d[1];if(!mb&&h&&(h.name||h.type)){g=["\x3c",g];h.name&&g.push(' name\x3d"',ta(h.name),'"');if(h.type){g.push(' type\x3d"',ta(h.type),'"');var k={};xb(k,h);delete k.type;h=k}g.push("\x3e");g=g.join("")}g=e.createElement(g);h&&(q(h)?g.className=h:ga(h)?pb.apply(null,[g].concat(h)):Cb(g,h));2<d.length&&Fb(e,g,d,2);return g}
function Fb(a,b,c,d){function e(c){c&&b.appendChild(q(c)?a.createTextNode(c):c)}for(;d<c.length;d++){var g=c[d];if(!ha(g)||ia(g)&&0<g.nodeType)e(g);else{var h;a:{if(g&&"number"==typeof g.length){if(ia(g)){h="function"==typeof g.item||"string"==typeof g.item;break a}if(r(g)){h="function"==typeof g.item;break a}}h=!1}y(h?Ha(g):g,e)}}}function Gb(a){for(var b;b=a.firstChild;)a.removeChild(b)}function Hb(a,b){b.parentNode&&b.parentNode.insertBefore(a,b)}
function Ib(a){a&&a.parentNode&&a.parentNode.removeChild(a)}function Jb(a,b){var c=b.parentNode;c&&c.replaceChild(a,b)}function Kb(a){return ia(a)&&1==a.nodeType}function Lb(a){if(nb&&!(C&&F("9")&&!F("10")&&p.SVGElement&&a instanceof p.SVGElement))return a.parentElement;a=a.parentNode;return Kb(a)?a:null}
function Mb(a,b){if(a.contains&&1==b.nodeType)return a==b||a.contains(b);if("undefined"!=typeof a.compareDocumentPosition)return a==b||Boolean(a.compareDocumentPosition(b)&16);for(;b&&a!=b;)b=b.parentNode;return b==a}function H(a){return 9==a.nodeType?a:a.ownerDocument||a.document}
function Nb(a,b){if("textContent"in a)a.textContent=b;else if(a.firstChild&&3==a.firstChild.nodeType){for(;a.lastChild!=a.firstChild;)a.removeChild(a.lastChild);a.firstChild.data=b}else Gb(a),a.appendChild(H(a).createTextNode(String(b)))}function Ob(a){var b=a.getAttributeNode("tabindex");return b&&b.specified?(a=a.tabIndex,"number"==typeof a&&0<=a&&32768>a):!1}function zb(a){this.ca=a||p.document||document}n=zb.prototype;n.$d=yb;n.j=function(a){return q(a)?this.ca.getElementById(a):a};n.F=Cb;
n.createElement=function(a){return this.ca.createElement(a)};n.createTextNode=function(a){return this.ca.createTextNode(String(a))};function Pb(a){var b=a.ca;a=E?b.body:b.documentElement;b=b.parentWindow||b.defaultView;return C&&F("10")&&b.pageYOffset!=a.scrollTop?new G(a.scrollLeft,a.scrollTop):new G(b.pageXOffset||a.scrollLeft,b.pageYOffset||a.scrollTop)}n.appendChild=function(a,b){a.appendChild(b)};n.append=function(a,b){Fb(H(a),a,arguments,1)};n.contains=Mb;function Qb(){return!0};/*
 Portions of this code are from the Dojo Toolkit, received by
 The Closure Library Authors under the BSD license. All other code is
 Copyright 2005-2009 The Closure Library Authors. All Rights Reserved.

The "New" BSD License:

Copyright (c) 2005-2009, The Dojo Foundation
All rights reserved.

Redistribution and use in source and binary forms, with or without
modification, are permitted provided that the following conditions are met:

 Redistributions of source code must retain the above copyright notice, this
    list of conditions and the following disclaimer.
 Redistributions in binary form must reproduce the above copyright notice,
    this list of conditions and the following disclaimer in the documentation
    and/or other materials provided with the distribution.
 Neither the name of the Dojo Foundation nor the names of its contributors
    may be used to endorse or promote products derived from this software
    without specific prior written permission.

THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
DISCLAIMED.  IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE
FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR
SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER
CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/
var I=function(){function a(a,c){if(!a)return[];if(a.constructor==Array)return a;if(!q(a))return[a];if(q(c)&&(c=q(c)?document.getElementById(c):c,!c))return[];c=c||document;var e=c.ownerDocument||c.documentElement;Qa=c.contentType&&"application/xml"==c.contentType||B&&(c.doctype||"[object XMLDocument]"==e.toString())||!!e&&(C?e.xml:c.xmlVersion||e.xmlVersion);return(e=d(a)(c))&&e.Ic?e:b(e)}function b(a){if(a&&a.Ic)return a;var b=[];if(!a||!a.length)return b;a[0]&&b.push(a[0]);if(2>a.length)return b;
ea++;if(C&&Qa){var c=ea+"";a[0].setAttribute("_zipIdx",c);for(var d=1,e;e=a[d];d++)a[d].getAttribute("_zipIdx")!=c&&b.push(e),e.setAttribute("_zipIdx",c)}else if(C&&a.De)try{for(d=1;e=a[d];d++)Rb(e)&&b.push(e)}catch(g){}else for(a[0]&&(a[0]._zipIdx=ea),d=1;e=a[d];d++)a[d]._zipIdx!=ea&&b.push(e),e._zipIdx=ea;return b}function c(a,b){if(!b)return 1;var c=kf(a);return b[c]?0:b[c]=1}function d(a,b){if(Ad){var c=Bd[a];if(c&&!b)return c}if(c=Cd[a])return c;var c=a.charAt(0),g=-1==a.indexOf(" ");0<=a.indexOf("#")&&
g&&(b=!0);if(!Ad||b||-1!="\x3e~+".indexOf(c)||C&&-1!=a.indexOf(":")||Dd&&0<=a.indexOf(".")||-1!=a.indexOf(":contains")||-1!=a.indexOf("|\x3d")){var h=a.split(/\s*,\s*/);return Cd[a]=2>h.length?e(a):function(a){for(var b=0,c=[],d;d=h[b++];)c=c.concat(e(d)(a));return c}}var k=0<="\x3e~+".indexOf(a.charAt(a.length-1))?a+" *":a;return Bd[a]=function(b){try{if(9!=b.nodeType&&!g)throw"";var c=b.querySelectorAll(k);C?c.De=!0:c.Ic=!0;return c}catch(e){return d(a,!0)(b)}}}function e(a){var b=Ed(sa(a));if(1==
b.length){var c=g(b[0]);return function(a){if(a=c(a,[]))a.Ic=!0;return a}}return function(a){a=ib(a);for(var c,d,e=b.length,h,k,tc=0;tc<e;tc++){k=[];c=b[tc];d=a.length-1;0<d&&(h={},k.Ic=!0);d=g(c);for(var l=0;c=a[l];l++)d(c,k,h);if(!k.length)break;a=k}return k}}function g(a){var b=Fd[a.Db];if(b)return b;var c=a.je,c=c?c.Jc:"",d=s(a,{Y:1}),e="*"==a.aa,g=document.getElementsByClassName;if(c)g={Y:1},e&&(g.aa=1),d=s(a,g),"+"==c?b=l(d):"~"==c?b=k(d):"\x3e"==c&&(b=h(d));else if(a.id)d=!a.me&&e?Qb:s(a,{Y:1,
id:1}),b=function(b,c){var e=yb(b).j(a.id),g;if((g=e&&d(e))&&!(g=9==b.nodeType)){for(g=e.parentNode;g&&g!=b;)g=g.parentNode;g=!!g}if(g)return ib(e,c)};else if(g&&/\{\s*\[native code\]\s*\}/.test(String(g))&&a.za.length&&!Dd)var d=s(a,{Y:1,za:1,id:1}),u=a.za.join(" "),b=function(a,b){for(var c=ib(0,b),e,g=0,h=a.getElementsByClassName(u);e=h[g++];)d(e,a)&&c.push(e);return c};else e||a.me?(d=s(a,{Y:1,aa:1,id:1}),b=function(b,c){for(var e=ib(0,c),g,h=0,k=b.getElementsByTagName(a.md());g=k[h++];)d(g,b)&&
e.push(g);return e}):b=function(b,c){for(var d=ib(0,c),e,g=0,h=b.getElementsByTagName(a.md());e=h[g++];)d.push(e);return d};return Fd[a.Db]=b}function h(a){a=a||Qb;return function(b,d,e){for(var g=0,h=b[Gd];b=h[g++];)jb(b)&&((!e||c(b,e))&&a(b,g))&&d.push(b);return d}}function k(a){return function(b,d,e){for(b=b[kb];b;){if(jb(b)){if(e&&!c(b,e))break;a(b)&&d.push(b)}b=b[kb]}return d}}function l(a){return function(b,d,e){for(;b=b[kb];)if(!Sb||Rb(b)){e&&!c(b,e)||!a(b)||d.push(b);break}return d}}function s(a,
b){if(!a)return Qb;b=b||{};var c=null;b.Y||(c=Ra(c,Rb));b.aa||"*"!=a.aa&&(c=Ra(c,function(b){return b&&b.tagName==a.md()}));b.za||y(a.za,function(a,b){var d=RegExp("(?:^|\\s)"+a+"(?:\\s|$)");c=Ra(c,function(a){return d.test(a.className)});c.count=b});b.kb||y(a.kb,function(a){var b=a.name;uc[b]&&(c=Ra(c,uc[b](b,a.value)))});b.tc||y(a.tc,function(a){var b,d=a.ed;a.type&&Hd[a.type]?b=Hd[a.type](d,a.sd):d.length&&(b=lf(d));b&&(c=Ra(c,b))});b.id||a.id&&(c=Ra(c,function(b){return!!b&&b.id==a.id}));c||"default"in
b||(c=Qb);return c}function w(a){return Tb(a)%2}function u(a){return!(Tb(a)%2)}function Tb(a){var b=a.parentNode,c=0,d=b[Gd],e=a._i||-1,g=b._l||-1;if(!d)return-1;d=d.length;if(g==d&&0<=e&&0<=g)return e;b._l=d;e=-1;for(b=b.firstElementChild||b.firstChild;b;b=b[kb])jb(b)&&(b._i=++c,a===b&&(e=c));return e}function Id(a){for(;a=a[kb];)if(jb(a))return!1;return!0}function Jd(a){for(;a=a[mf];)if(jb(a))return!1;return!0}function la(a,b){return a?"class"==b?a.className||"":"for"==b?a.htmlFor||"":"style"==
b?a.style.cssText||"":(Qa?a.getAttribute(b):a.getAttribute(b,2))||"":""}function Rb(a){return 1==a.nodeType}function Ra(a,b){return a?b?function(){return a.apply(window,arguments)&&b.apply(window,arguments)}:a:b}function Ed(a){function b(){0<=s&&(v.id=c(s,A).replace(/\\/g,""),s=-1);if(0<=u){var a=u==A?null:c(u,A);0>"\x3e~+".indexOf(a)?v.aa=a:v.Jc=a;u=-1}0<=l&&(v.za.push(c(l+1,A).replace(/\\/g,"")),l=-1)}function c(b,d){return sa(a.slice(b,d))}a=0<="\x3e~+".indexOf(a.slice(-1))?a+" * ":a+" ";for(var d=
[],e=-1,g=-1,h=-1,k=-1,l=-1,s=-1,u=-1,w="",P="",la,A=0,ea=a.length,v=null,Q=null;w=P,P=a.charAt(A),A<ea;A++)"\\"!=w&&(v||(la=A,v={Db:null,kb:[],tc:[],za:[],aa:null,Jc:null,id:null,md:function(){return Qa?this.Te:this.aa}},u=A),0<=e?"]"==P?(Q.ed?Q.sd=c(h||e+1,A):Q.ed=c(e+1,A),!(e=Q.sd)||'"'!=e.charAt(0)&&"'"!=e.charAt(0)||(Q.sd=e.slice(1,-1)),v.tc.push(Q),Q=null,e=h=-1):"\x3d"==P&&(h=0<="|~^$*".indexOf(w)?w:"",Q.type=h+P,Q.ed=c(e+1,A-h.length),h=A+1):0<=g?")"==P&&(0<=k&&(Q.value=c(g+1,A)),k=g=-1):
"#"==P?(b(),s=A+1):"."==P?(b(),l=A):":"==P?(b(),k=A):"["==P?(b(),e=A,Q={}):"("==P?(0<=k&&(Q={name:c(k+1,A),value:null},v.kb.push(Q)),g=A):" "==P&&w!=P&&(b(),0<=k&&v.kb.push({name:c(k+1,A)}),v.me=v.kb.length||v.tc.length||v.za.length,v.nf=v.Db=c(la,A),v.Te=v.aa=v.Jc?null:v.aa||"*",v.aa&&(v.aa=v.aa.toUpperCase()),d.length&&d[d.length-1].Jc&&(v.je=d.pop(),v.Db=v.je.Db+" "+v.Db),d.push(v),v=null));return d}function ib(a,b){var c=b||[];a&&c.push(a);return c}var Dd=E&&"BackCompat"==document.compatMode,
Gd=document.firstChild.children?"children":"childNodes",Qa=!1,Hd={"*\x3d":function(a,b){return function(c){return 0<=la(c,a).indexOf(b)}},"^\x3d":function(a,b){return function(c){return 0==la(c,a).indexOf(b)}},"$\x3d":function(a,b){return function(c){c=" "+la(c,a);return c.lastIndexOf(b)==c.length-b.length}},"~\x3d":function(a,b){var c=" "+b+" ";return function(b){return 0<=(" "+la(b,a)+" ").indexOf(c)}},"|\x3d":function(a,b){b=" "+b;return function(c){c=" "+la(c,a);return c==b||0==c.indexOf(b+"-")}},
"\x3d":function(a,b){return function(c){return la(c,a)==b}}},Sb="undefined"==typeof document.firstChild.nextElementSibling,kb=Sb?"nextSibling":"nextElementSibling",mf=Sb?"previousSibling":"previousElementSibling",jb=Sb?Rb:Qb,uc={checked:function(){return function(a){return a.checked||a.attributes.checked}},"first-child":function(){return Jd},"last-child":function(){return Id},"only-child":function(){return function(a){return Jd(a)&&Id(a)?!0:!1}},empty:function(){return function(a){var b=a.childNodes;
for(a=a.childNodes.length-1;0<=a;a--){var c=b[a].nodeType;if(1===c||3==c)return!1}return!0}},contains:function(a,b){var c=b.charAt(0);if('"'==c||"'"==c)b=b.slice(1,-1);return function(a){return 0<=a.innerHTML.indexOf(b)}},not:function(a,b){var c=Ed(b)[0],d={Y:1};"*"!=c.aa&&(d.aa=1);c.za.length||(d.za=1);var e=s(c,d);return function(a){return!e(a)}},"nth-child":function(a,b){if("odd"==b)return w;if("even"==b)return u;if(-1!=b.indexOf("n")){var c=b.split("n",2),d=c[0]?"-"==c[0]?-1:parseInt(c[0],10):
1,e=c[1]?parseInt(c[1],10):0,g=0,h=-1;0<d?0>e?e=e%d&&d+e%d:0<e&&(e>=d&&(g=e-e%d),e%=d):0>d&&(d*=-1,0<e&&(h=e,e%=d));if(0<d)return function(a){a=Tb(a);return a>=g&&(0>h||a<=h)&&a%d==e};b=e}var k=parseInt(b,10);return function(a){return Tb(a)==k}}},lf=C?function(a){var b=a.toLowerCase();"class"==b&&(a="className");return function(c){return Qa?c.getAttribute(a):c[a]||c[b]}}:function(a){return function(b){return b&&b.getAttribute&&b.hasAttribute(a)}},Fd={},Cd={},Bd={},Ad=!!document.querySelectorAll&&
(!E||F("526")),ea=0,kf=C?function(a){return Qa?a.getAttribute("_uid")||a.setAttribute("_uid",++ea)||ea:a.uniqueID}:function(a){return a._uid||(a._uid=++ea)};a.kb=uc;return a}();ba("goog.dom.query",I);ba("goog.dom.query.pseudos",I.kb);var Ub=!C||C&&9<=hb,Vb=!C||C&&9<=hb,Wb=C&&!F("9");!E||F("528");D&&F("1.9b")||C&&F("8")||B&&F("9.5")||E&&F("528");D&&!F("8")||C&&F("9");function Xb(){0!=Yb&&(this.gf=Error().stack,Zb[ja(this)]=this)}var Yb=0,Zb={};Xb.prototype.wc=!1;Xb.prototype.ub=function(){if(!this.wc&&(this.wc=!0,this.S(),0!=Yb)){var a=ja(this);delete Zb[a]}};Xb.prototype.S=function(){if(this.ic)for(;this.ic.length;)this.ic.shift()()};function $b(a){a&&"function"==typeof a.ub&&a.ub()};function ac(a,b){this.type=a;this.currentTarget=this.target=b}n=ac.prototype;n.S=f();n.ub=f();n.Pa=!1;n.defaultPrevented=!1;n.qe=!0;n.stopPropagation=function(){this.Pa=!0};n.preventDefault=function(){this.defaultPrevented=!0;this.qe=!1};function bc(a){a.preventDefault()};function cc(a){cc[" "](a);return a}cc[" "]=ca;function dc(a,b){a&&this.init(a,b)}t(dc,ac);var ec=[1,4,2];n=dc.prototype;n.target=null;n.relatedTarget=null;n.offsetX=0;n.offsetY=0;n.clientX=0;n.clientY=0;n.screenX=0;n.screenY=0;n.button=0;n.keyCode=0;n.charCode=0;n.ctrlKey=!1;n.altKey=!1;n.shiftKey=!1;n.metaKey=!1;n.xd=!1;n.C=null;
n.init=function(a,b){var c=this.type=a.type;ac.call(this,c);this.target=a.target||a.srcElement;this.currentTarget=b;var d=a.relatedTarget;if(d){if(D){var e;a:{try{cc(d.nodeName);e=!0;break a}catch(g){}e=!1}e||(d=null)}}else"mouseover"==c?d=a.fromElement:"mouseout"==c&&(d=a.toElement);this.relatedTarget=d;this.offsetX=E||void 0!==a.offsetX?a.offsetX:a.layerX;this.offsetY=E||void 0!==a.offsetY?a.offsetY:a.layerY;this.clientX=void 0!==a.clientX?a.clientX:a.pageX;this.clientY=void 0!==a.clientY?a.clientY:
a.pageY;this.screenX=a.screenX||0;this.screenY=a.screenY||0;this.button=a.button;this.keyCode=a.keyCode||0;this.charCode=a.charCode||("keypress"==c?a.keyCode:0);this.ctrlKey=a.ctrlKey;this.altKey=a.altKey;this.shiftKey=a.shiftKey;this.metaKey=a.metaKey;this.xd=Sa?a.metaKey:a.ctrlKey;this.state=a.state;this.C=a;a.defaultPrevented&&this.preventDefault();delete this.Pa};function fc(a){return(Ub?0==a.C.button:"click"==a.type?!0:!!(a.C.button&ec[0]))&&!(E&&Sa&&a.ctrlKey)}
n.stopPropagation=function(){dc.G.stopPropagation.call(this);this.C.stopPropagation?this.C.stopPropagation():this.C.cancelBubble=!0};n.preventDefault=function(){dc.G.preventDefault.call(this);var a=this.C;if(a.preventDefault)a.preventDefault();else if(a.returnValue=!1,Wb)try{if(a.ctrlKey||112<=a.keyCode&&123>=a.keyCode)a.keyCode=-1}catch(b){}};n.Ee=m("C");n.S=f();var gc="closure_listenable_"+(1E6*Math.random()|0),hc=0;function ic(a,b,c,d,e,g){this.ua=a;this.oe=b;this.src=c;this.type=d;this.capture=!!e;this.sa=g;this.key=++hc;this.Da=this.qb=!1}function jc(a){a.Da=!0;a.ua=null;a.oe=null;a.src=null;a.sa=null};var kc={},J={},lc={},mc={};
function K(a,b,c,d,e){if(ga(b)){for(var g=0;g<b.length;g++)K(a,b[g],c,d,e);return null}c=nc(c);if(a&&a[gc])a=a.w(b,c,d,e);else a:{if(!b)throw Error("Invalid event type");d=!!d;var h=J;b in h||(h[b]={X:0});h=h[b];d in h||(h[d]={X:0},h.X++);var h=h[d],g=ja(a),k;if(h[g]){k=h[g];for(var l=0;l<k.length;l++)if(h=k[l],h.ua==c&&h.sa==e){if(h.Da)break;k[l].qb=!1;a=k[l];break a}}else k=h[g]=[],h.X++;l=oc();h=new ic(c,l,a,b,d,e);h.qb=!1;l.src=a;l.ua=h;k.push(h);lc[g]||(lc[g]=[]);lc[g].push(h);a.addEventListener?
a.addEventListener(b,l,d):a.attachEvent(b in mc?mc[b]:mc[b]="on"+b,l);a=kc[h.key]=h}return a}function oc(){var a=pc,b=Vb?function(c){return a.call(b.src,b.ua,c)}:function(c){c=a.call(b.src,b.ua,c);if(!c)return c};return b}function qc(a,b,c,d,e){if(ga(b))for(var g=0;g<b.length;g++)qc(a,b[g],c,d,e);else if(c=nc(c),a&&a[gc])a.Fa(b,c,d,e);else if(d=!!d,a=rc(a,b,d))for(g=0;g<a.length;g++)if(a[g].ua==c&&a[g].capture==d&&a[g].sa==e){L(a[g]);break}}
function L(a){if("number"==typeof a||!a||a.Da)return!1;var b=a.src;if(b&&b[gc])return sc(b.Ia,a);var c=a.type,d=a.oe,e=a.capture;b.removeEventListener?b.removeEventListener(c,d,e):b.detachEvent&&b.detachEvent(c in mc?mc[c]:mc[c]="on"+c,d);b=ja(b);lc[b]&&(d=lc[b],z(d,a),0==d.length&&delete lc[b]);jc(a);if(d=J[c][e][b])z(d,a),0==d.length&&(delete J[c][e][b],J[c][e].X--),0==J[c][e].X&&(delete J[c][e],J[c].X--),0==J[c].X&&delete J[c];delete kc[a.key];return!0}
function rc(a,b,c){var d=J;return b in d&&(d=d[b],c in d&&(d=d[c],a=ja(a),d[a]))?d[a]:null}function vc(a,b,c){var d=1;b=ja(b);if(a[b])for(a=Ha(a[b]),b=0;b<a.length;b++){var e=a[b];e&&!e.Da&&(d&=!1!==wc(e,c))}return Boolean(d)}function wc(a,b){var c=a.ua,d=a.sa||a.src;a.qb&&L(a);return c.call(d,b)}
function pc(a,b){if(a.Da)return!0;var c=a.type,d=J;if(!(c in d))return!0;var d=d[c],e,g;if(!Vb){if(!(c=b))a:{for(var c=["window","event"],h=p;e=c.shift();)if(null!=h[e])h=h[e];else{c=null;break a}c=h}e=c;c=!0 in d;h=!1 in d;if(c){if(0>e.keyCode||void 0!=e.returnValue)return!0;a:{var k=!1;if(0==e.keyCode)try{e.keyCode=-1;break a}catch(l){k=!0}if(k||void 0==e.returnValue)e.returnValue=!0}}k=new dc;k.init(e,this);e=!0;try{if(c){for(var s=[],w=k.currentTarget;w;w=w.parentNode)s.push(w);g=d[!0];for(var u=
s.length-1;!k.Pa&&0<=u;u--)k.currentTarget=s[u],e&=vc(g,s[u],k);if(h)for(g=d[!1],u=0;!k.Pa&&u<s.length;u++)k.currentTarget=s[u],e&=vc(g,s[u],k)}else e=wc(a,k)}finally{s&&(s.length=0)}return e}d=new dc(b,this);return e=wc(a,d)}var xc="__closure_events_fn_"+(1E9*Math.random()>>>0);function nc(a){return r(a)?a:a[xc]||(a[xc]=function(b){return a.handleEvent(b)})};function yc(a){Xb.call(this);this.ge=a;this.v={}}t(yc,Xb);var zc=[];n=yc.prototype;n.w=function(a,b,c,d,e){ga(b)||(zc[0]=b,b=zc);for(var g=0;g<b.length;g++){var h=K(a,b[g],c||this,d||!1,e||this.ge||this);this.v[h.key]=h}return this};
n.Fa=function(a,b,c,d,e){if(ga(b))for(var g=0;g<b.length;g++)this.Fa(a,b[g],c,d,e);else{a:if(e=e||this.ge||this,d=!!d,c=nc(c||this),a&&a[gc])a=a.ld(b,c,d,e);else{if(a=rc(a,b,d))for(b=0;b<a.length;b++)if(!a[b].Da&&a[b].ua==c&&a[b].capture==d&&a[b].sa==e){a=a[b];break a}a=null}a&&(L(a),delete this.v[a.key])}return this};n.Qa=function(){vb(this.v,L);this.v={}};n.S=function(){yc.G.S.call(this);this.Qa()};n.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented");};function Ac(a){this.src=a;this.$={};this.Qc=0}Ac.prototype.add=function(a,b,c,d,e){var g=this.$[a];g||(g=this.$[a]=[],this.Qc++);var h=Bc(g,b,d,e);-1<h?(a=g[h],c||(a.qb=!1)):(a=new ic(b,null,this.src,a,!!d,e),a.qb=c,g.push(a));return a};Ac.prototype.remove=function(a,b,c,d){if(!(a in this.$))return!1;var e=this.$[a];b=Bc(e,b,c,d);return-1<b?(jc(e[b]),x.splice.call(e,b,1),0==e.length&&(delete this.$[a],this.Qc--),!0):!1};
function sc(a,b){var c=b.type;if(!(c in a.$))return!1;var d=z(a.$[c],b);d&&(jc(b),0==a.$[c].length&&(delete a.$[c],a.Qc--));return d}Ac.prototype.Qa=function(a){var b=0,c;for(c in this.$)if(!a||c==a){for(var d=this.$[c],e=0;e<d.length;e++)++b,d[e].Da=!0;delete this.$[c];this.Qc--}return b};Ac.prototype.ld=function(a,b,c,d){a=this.$[a];var e=-1;a&&(e=Bc(a,b,c,d));return-1<e?a[e]:null};
function Bc(a,b,c,d){for(var e=0;e<a.length;++e){var g=a[e];if(!g.Da&&g.ua==b&&g.capture==!!c&&g.sa==d)return e}return-1};function Cc(){Xb.call(this);this.Ia=new Ac(this);this.Be=this}t(Cc,Xb);Cc.prototype[gc]=!0;n=Cc.prototype;n.Mc=null;n.Ed=function(a){this.Mc=a};n.addEventListener=function(a,b,c,d){K(this,a,b,c,d)};n.removeEventListener=function(a,b,c,d){qc(this,a,b,c,d)};
n.dispatchEvent=function(a){var b,c=this.Mc;if(c)for(b=[];c;c=c.Mc)b.push(c);var c=this.Be,d=a.type||a;if(q(a))a=new ac(a,c);else if(a instanceof ac)a.target=a.target||c;else{var e=a;a=new ac(d,c);xb(a,e)}var e=!0,g;if(b)for(var h=b.length-1;!a.Pa&&0<=h;h--)g=a.currentTarget=b[h],e=Dc(g,d,!0,a)&&e;a.Pa||(g=a.currentTarget=c,e=Dc(g,d,!0,a)&&e,a.Pa||(e=Dc(g,d,!1,a)&&e));if(b)for(h=0;!a.Pa&&h<b.length;h++)g=a.currentTarget=b[h],e=Dc(g,d,!1,a)&&e;return e};
n.S=function(){Cc.G.S.call(this);this.Ia&&this.Ia.Qa(void 0);this.Mc=null};n.w=function(a,b,c,d){return this.Ia.add(a,b,!1,c,d)};n.Fa=function(a,b,c,d){return this.Ia.remove(a,b,c,d)};function Dc(a,b,c,d){b=a.Ia.$[b];if(!b)return!0;b=Ha(b);for(var e=!0,g=0;g<b.length;++g){var h=b[g];if(h&&!h.Da&&h.capture==c){var k=h.ua,l=h.sa||h.src;h.qb&&sc(a.Ia,h);e=!1!==k.call(l,d)&&e}}return e&&!1!=d.qe}n.ld=function(a,b,c,d){return this.Ia.ld(a,b,c,d)};function Ec(a,b,c,d){this.top=a;this.right=b;this.bottom=c;this.left=d}Ec.prototype.contains=function(a){return this&&a?a instanceof Ec?a.left>=this.left&&a.right<=this.right&&a.top>=this.top&&a.bottom<=this.bottom:a.x>=this.left&&a.x<=this.right&&a.y>=this.top&&a.y<=this.bottom:!1};Ec.prototype.round=function(){this.top=Math.round(this.top);this.right=Math.round(this.right);this.bottom=Math.round(this.bottom);this.left=Math.round(this.left);return this};function Fc(a,b,c,d){this.left=a;this.top=b;this.width=c;this.height=d}Fc.prototype.contains=function(a){return a instanceof Fc?this.left<=a.left&&this.left+this.width>=a.left+a.width&&this.top<=a.top&&this.top+this.height>=a.top+a.height:a.x>=this.left&&a.x<=this.left+this.width&&a.y>=this.top&&a.y<=this.top+this.height};Fc.prototype.round=function(){this.left=Math.round(this.left);this.top=Math.round(this.top);this.width=Math.round(this.width);this.height=Math.round(this.height);return this};function M(a,b,c){q(b)?Gc(a,c,b):vb(b,qa(Gc,a))}function Gc(a,b,c){(c=Hc(a,c))&&(a.style[c]=b)}function Hc(a,b){var c=za(b);if(void 0===a.style[c]){var d=(E?"Webkit":D?"Moz":C?"ms":B?"O":null)+Aa(b);if(void 0!==a.style[d])return d}return c}function Ic(a,b){var c=a.style[za(b)];return"undefined"!==typeof c?c:a.style[Hc(a,b)]||""}function N(a,b){var c=H(a);return c.defaultView&&c.defaultView.getComputedStyle&&(c=c.defaultView.getComputedStyle(a,null))?c[b]||c.getPropertyValue(b)||"":""}
function Jc(a,b){return N(a,b)||(a.currentStyle?a.currentStyle[b]:null)||a.style&&a.style[b]}function Kc(a,b,c){var d,e=D&&(Sa||Ya)&&F("1.9");b instanceof G?(d=b.x,b=b.y):(d=b,b=c);a.style.left=Lc(d,e);a.style.top=Lc(b,e)}function Mc(a){var b;try{b=a.getBoundingClientRect()}catch(c){return{left:0,top:0,right:0,bottom:0}}C&&(a=a.ownerDocument,b.left-=a.documentElement.clientLeft+a.body.clientLeft,b.top-=a.documentElement.clientTop+a.body.clientTop);return b}
function Nc(a){if(C&&!(C&&8<=hb))return a.offsetParent;var b=H(a),c=Jc(a,"position"),d="fixed"==c||"absolute"==c;for(a=a.parentNode;a&&a!=b;a=a.parentNode)if(c=Jc(a,"position"),d=d&&"static"==c&&a!=b.documentElement&&a!=b.body,!d&&(a.scrollWidth>a.clientWidth||a.scrollHeight>a.clientHeight||"fixed"==c||"absolute"==c||"relative"==c))return a;return null}
function Oc(a){var b,c=H(a),d=Jc(a,"position"),e=D&&c.getBoxObjectFor&&!a.getBoundingClientRect&&"absolute"==d&&(b=c.getBoxObjectFor(a))&&(0>b.screenX||0>b.screenY),g=new G(0,0),h;b=c?H(c):document;(h=!C)||(h=C&&9<=hb)||(yb(b),h=!0);h=h?b.documentElement:b.body;if(a==h)return g;if(a.getBoundingClientRect)b=Mc(a),a=Pb(yb(c)),g.x=b.left+a.x,g.y=b.top+a.y;else if(c.getBoxObjectFor&&!e)b=c.getBoxObjectFor(a),a=c.getBoxObjectFor(h),g.x=b.screenX-a.screenX,g.y=b.screenY-a.screenY;else{e=a;do{g.x+=e.offsetLeft;
g.y+=e.offsetTop;e!=a&&(g.x+=e.clientLeft||0,g.y+=e.clientTop||0);if(E&&"fixed"==Jc(e,"position")){g.x+=c.body.scrollLeft;g.y+=c.body.scrollTop;break}e=e.offsetParent}while(e&&e!=a);if(B||E&&"absolute"==d)g.y-=c.body.offsetTop;for(e=a;(e=Nc(e))&&e!=c.body&&e!=h;)g.x-=e.scrollLeft,B&&"TR"==e.tagName||(g.y-=e.scrollTop)}return g}function Pc(a,b){var c=Qc(a),d=Qc(b);return new G(c.x-d.x,c.y-d.y)}
function Qc(a){if(1==a.nodeType){var b;if(a.getBoundingClientRect)b=Mc(a),b=new G(b.left,b.top);else{b=Pb(yb(a));var c=Oc(a);b=new G(c.x-b.x,c.y-b.y)}if(D&&!F(12)){var d;C?d="-ms-transform":E?d="-webkit-transform":B?d="-o-transform":D&&(d="-moz-transform");var e;d&&(e=Jc(a,d));e||(e=Jc(a,"transform"));a=e?(a=e.match(Rc))?new G(parseFloat(a[1]),parseFloat(a[2])):new G(0,0):new G(0,0);a=new G(b.x+a.x,b.y+a.y)}else a=b;return a}d=r(a.Ee);e=a;a.targetTouches?e=a.targetTouches[0]:d&&a.C.targetTouches&&
(e=a.C.targetTouches[0]);return new G(e.clientX,e.clientY)}function Sc(a,b,c){if(b instanceof ub)c=b.height,b=b.width;else if(void 0==c)throw Error("missing height argument");a.style.width=Lc(b,!0);a.style.height=Lc(c,!0)}function Lc(a,b){"number"==typeof a&&(a=(b?Math.round(a):a)+"px");return a}
function Tc(a){var b=Uc;if("none"!=Jc(a,"display"))return b(a);var c=a.style,d=c.display,e=c.visibility,g=c.position;c.visibility="hidden";c.position="absolute";c.display="inline";a=b(a);c.display=d;c.position=g;c.visibility=e;return a}function Uc(a){var b=a.offsetWidth,c=a.offsetHeight,d=E&&!b&&!c;return(void 0===b||d)&&a.getBoundingClientRect?(a=Mc(a),new ub(a.right-a.left,a.bottom-a.top)):new ub(b,c)}function Vc(a){var b=Oc(a);a=Tc(a);return new Fc(b.x,b.y,a.width,a.height)}
function O(a,b){var c=a.style;"opacity"in c?c.opacity=b:"MozOpacity"in c?c.MozOpacity=b:"filter"in c&&(c.filter=""===b?"":"alpha(opacity\x3d"+100*b+")")}function R(a,b){a.style.display=b?"":"none"}function Wc(a){return"rtl"==Jc(a,"direction")}var Xc=D?"MozUserSelect":E?"WebkitUserSelect":null;
function Yc(a,b){if(/^\d+px?$/.test(b))return parseInt(b,10);var c=a.style.left,d=a.runtimeStyle.left;a.runtimeStyle.left=a.currentStyle.left;a.style.left=b;var e=a.style.pixelLeft;a.style.left=c;a.runtimeStyle.left=d;return e}function Zc(a,b){var c=a.currentStyle?a.currentStyle[b]:null;return c?Yc(a,c):0}
function $c(a,b){if(C){var c=Zc(a,b+"Left"),d=Zc(a,b+"Right"),e=Zc(a,b+"Top"),g=Zc(a,b+"Bottom");return new Ec(e,d,g,c)}c=N(a,b+"Left");d=N(a,b+"Right");e=N(a,b+"Top");g=N(a,b+"Bottom");return new Ec(parseFloat(e),parseFloat(d),parseFloat(g),parseFloat(c))}var ad={thin:2,medium:4,thick:6};function bd(a,b){if("none"==(a.currentStyle?a.currentStyle[b+"Style"]:null))return 0;var c=a.currentStyle?a.currentStyle[b+"Width"]:null;return c in ad?ad[c]:Yc(a,c)}
function cd(a){if(C){var b=bd(a,"borderLeft"),c=bd(a,"borderRight"),d=bd(a,"borderTop");a=bd(a,"borderBottom");return new Ec(d,c,a,b)}b=N(a,"borderLeftWidth");c=N(a,"borderRightWidth");d=N(a,"borderTopWidth");a=N(a,"borderBottomWidth");return new Ec(parseFloat(d),parseFloat(c),parseFloat(a),parseFloat(b))}var Rc=/matrix\([0-9\.\-]+, [0-9\.\-]+, [0-9\.\-]+, [0-9\.\-]+, ([0-9\.\-]+)p?x?, ([0-9\.\-]+)p?x?\)/;function dd(a,b,c){Cc.call(this);this.target=a;this.handle=b||a;this.qd=c||new Fc(NaN,NaN,NaN,NaN);this.ca=H(a);this.qa=new yc(this);a=qa($b,this.qa);this.ic||(this.ic=[]);this.ic.push(pa(a,void 0));K(this.handle,["touchstart","mousedown"],this.re,!1,this)}t(dd,Cc);var ed=C||D&&F("1.9.3");n=dd.prototype;n.clientX=0;n.clientY=0;n.screenX=0;n.screenY=0;n.te=0;n.ue=0;n.sb=0;n.tb=0;n.Xd=!0;n.jb=!1;n.ie=0;n.Pe=0;n.Le=!1;n.Gd=!1;n.yc=m("qa");function fd(a,b){a.qd=b||new Fc(NaN,NaN,NaN,NaN)}
n.S=function(){dd.G.S.call(this);qc(this.handle,["touchstart","mousedown"],this.re,!1,this);this.qa.Qa();ed&&this.ca.releaseCapture();this.handle=this.target=null};function gd(a){void 0===a.Ra&&(a.Ra=Wc(a.target));return a.Ra}
n.re=function(a){var b="mousedown"==a.type;if(!this.Xd||this.jb||b&&!fc(a))this.dispatchEvent("earlycancel");else{hd(a);if(0==this.ie)if(this.dispatchEvent(new id("start",this,a.clientX,a.clientY,a)))this.jb=!0,a.preventDefault();else return;else a.preventDefault();var b=this.ca,c=b.documentElement,d=!ed;this.qa.w(b,["touchmove","mousemove"],this.Je,d);this.qa.w(b,["touchend","mouseup"],this.xc,d);ed?(c.setCapture(!1),this.qa.w(c,"losecapture",this.xc)):this.qa.w(b?b.parentWindow||b.defaultView:window,
"blur",this.xc);C&&this.Le&&this.qa.w(b,"dragstart",bc);this.Ve&&this.qa.w(this.Ve,"scroll",this.Se,d);this.clientX=this.te=a.clientX;this.clientY=this.ue=a.clientY;this.screenX=a.screenX;this.screenY=a.screenY;this.Gd?(a=this.target,b=a.offsetLeft,c=a.offsetParent,c||"fixed"!=Jc(a,"position")||(c=H(a).documentElement),c?(D?(d=cd(c),b+=d.left):C&&8<=hb&&(d=cd(c),b-=d.left),a=Wc(c)?c.clientWidth-(b+a.offsetWidth):b):a=b):a=this.target.offsetLeft;this.sb=a;this.tb=this.target.offsetTop;this.wd=Pb(yb(this.ca));
this.Pe=ra()}};n.xc=function(a,b){this.qa.Qa();ed&&this.ca.releaseCapture();if(this.jb){hd(a);this.jb=!1;var c=jd(this,this.sb),d=kd(this,this.tb);this.dispatchEvent(new id("end",this,a.clientX,a.clientY,a,c,d,b||"touchcancel"==a.type))}else this.dispatchEvent("earlycancel")};function hd(a){var b=a.type;"touchstart"==b||"touchmove"==b?a.init(a.C.targetTouches[0],a.currentTarget):"touchend"!=b&&"touchcancel"!=b||a.init(a.C.changedTouches[0],a.currentTarget)}
n.Je=function(a){if(this.Xd){hd(a);var b=(this.Gd&&gd(this)?-1:1)*(a.clientX-this.clientX),c=a.clientY-this.clientY;this.clientX=a.clientX;this.clientY=a.clientY;this.screenX=a.screenX;this.screenY=a.screenY;if(!this.jb){var d=this.te-this.clientX,e=this.ue-this.clientY;if(d*d+e*e>this.ie)if(this.dispatchEvent(new id("start",this,a.clientX,a.clientY,a)))this.jb=!0;else{this.wc||this.xc(a);return}}c=ld(this,b,c);b=c.x;c=c.y;this.jb&&this.dispatchEvent(new id("beforedrag",this,a.clientX,a.clientY,a,
b,c))&&(md(this,a,b,c),a.preventDefault())}};function ld(a,b,c){var d=Pb(yb(a.ca));b+=d.x-a.wd.x;c+=d.y-a.wd.y;a.wd=d;a.sb+=b;a.tb+=c;b=jd(a,a.sb);a=kd(a,a.tb);return new G(b,a)}n.Se=function(a){var b=ld(this,0,0);a.clientX=this.clientX;a.clientY=this.clientY;md(this,a,b.x,b.y)};function md(a,b,c,d){a.Wd(c,d);a.dispatchEvent(new id("drag",a,b.clientX,b.clientY,b,c,d))}
function jd(a,b){var c=a.qd,d=isNaN(c.left)?null:c.left,c=isNaN(c.width)?0:c.width;return Math.min(null!=d?d+c:Infinity,Math.max(null!=d?d:-Infinity,b))}function kd(a,b){var c=a.qd,d=isNaN(c.top)?null:c.top,c=isNaN(c.height)?0:c.height;return Math.min(null!=d?d+c:Infinity,Math.max(null!=d?d:-Infinity,b))}n.Wd=function(a,b){this.Gd&&gd(this)?this.target.style.right=a+"px":this.target.style.left=a+"px";this.target.style.top=b+"px"};
function id(a,b,c,d,e,g,h,k){ac.call(this,a);this.clientX=c;this.clientY=d;this.ff=e;this.left=void 0!==g?g:b.sb;this.top=void 0!==h?h:b.tb;this.jf=b;this.hf=!!k}t(id,ac);function nd(a){for(var b=0,c=0;a&&!isNaN(a.offsetLeft)&&!isNaN(a.offsetTop);)b+=a.offsetLeft-a.scrollLeft,c+=a.offsetTop-a.scrollTop,a=a.offsetParent;return{top:c,left:b}}function od(a){window.addEventListener?window.addEventListener("load",a,!1):window.attachEvent&&window.attachEvent("onload",a)}
function pd(a,b){var c=document.createElement("div");M(c,"position","absolute");M(c,"top","0px");M(c,"right","0px");M(c,"width","5px");M(c,"height","100%");M(c,"cursor","e-resize");a.appendChild(c);var d=cd(a),d=Vc(a).width-d.right-d.left,c=new dd(c);fd(c,new Fc(d,0,800,0));c.Wd=function(c){M(a,"width",c+"px");b&&b()}}function qd(a){if(0<a.indexOf("://"))return a;var b=document.createElement("a");b.href=a;return b.protocol+"//"+b.host+b.pathname};function rd(){this.Ob=[]}rd.prototype.addHandler=function(a,b){this.Ob[a]||(this.Ob[a]=[]);this.Ob[a].push(b)};rd.prototype.wa=function(a,b){var c=this.Ob[a];c&&z(c,b)};rd.prototype.fireEvent=function(a,b,c){var d=!1;(a=this.Ob[a])&&y(a,function(a){a=a(b,c);void 0!==a&&!a&&(d=!0)});return d};function sd(a,b){this.va={};this.v=[];var c=arguments.length;if(1<c){if(c%2)throw Error("Uneven number of arguments");for(var d=0;d<c;d+=2)this.set(arguments[d],arguments[d+1])}else if(a){var e;if(a instanceof sd)td(a),e=a.v.concat(),d=S(a);else{var c=[],g=0;for(e in a)c[g++]=e;e=c;c=[];g=0;for(d in a)c[g++]=a[d];d=c}for(c=0;c<e.length;c++)this.set(e[c],d[c])}}n=sd.prototype;n.X=0;n.Hd=0;function S(a){td(a);for(var b=[],c=0;c<a.v.length;c++)b.push(a.va[a.v[c]]);return b}
n.clear=function(){this.va={};this.Hd=this.X=this.v.length=0};n.remove=function(a){return ud(this.va,a)?(delete this.va[a],this.X--,this.Hd++,this.v.length>2*this.X&&td(this),!0):!1};function td(a){if(a.X!=a.v.length){for(var b=0,c=0;b<a.v.length;){var d=a.v[b];ud(a.va,d)&&(a.v[c++]=d);b++}a.v.length=c}if(a.X!=a.v.length){for(var e={},c=b=0;b<a.v.length;)d=a.v[b],ud(e,d)||(a.v[c++]=d,e[d]=1),b++;a.v.length=c}}n.get=function(a,b){return ud(this.va,a)?this.va[a]:b};
n.set=function(a,b){ud(this.va,a)||(this.X++,this.v.push(a),this.Hd++);this.va[a]=b};function ud(a,b){return Object.prototype.hasOwnProperty.call(a,b)};function T(a,b){this.x=a;this.y=b};function vd(a){this.points=a}function wd(a){for(var b=0,c=a.length-1,d=0;d<a.length;d++)b+=(a[c].x+a[d].x)*(a[c].y-a[d].y),c=d;return b/2}function xd(a){for(var b=0,c=0,d,e=a.length-1,g=0;g<a.length;g++)d=a[g].x*a[e].y-a[e].x*a[g].y,b+=(a[g].x+a[e].x)*d,c+=(a[g].y+a[e].y)*d,e=g;d=6*wd(a);return new T(Math.abs(b/d),Math.abs(c/d))}
function yd(a,b){for(var c=xd(a),d=[],e=0;e<a.length;e++){var g=a[e],h=(0>wd(a)?-1:1)*b,k=g.x-c.x,l=g.y-c.y,s=0<h?1:0>h?-1:0,h=Math.sqrt(Math.pow(h,2)/(1+Math.pow(k/l,2)));d.push({x:g.x+Math.abs(k/l*h)*(0<k?1:0>k?-1:0)*s,y:g.y+Math.abs(h)*(0<l?1:0>l?-1:0)*s})}return d};function zd(a,b,c,d){0<c?(this.x=a,this.width=c):(this.x=a+c,this.width=-c);0<d?(this.y=b,this.height=d):(this.y=b+d,this.height=-d)};function Kd(a,b,c,d,e){this.type=a;this.geometry=b;e&&a==U&&(this.mask=e);c&&(this.units=c);this.style=d?d:{}}var U="rect";function Ld(a,b,c){if(a.type==U||"arrow"==a.type)return a="arrow"==a.type?Md(a.geometry):a.geometry,b<a.x||c<a.y||b>a.x+a.width||c>a.y+a.height?!1:!0;if("polygon"==a.type){a=a.geometry.points;for(var d=!1,e=a.length-1,g=0;g<a.length;g++)a[g].y>c!=a[e].y>c&&b<(a[e].x-a[g].x)*(c-a[g].y)/(a[e].y-a[g].y)+a[g].x&&(d=!d),e=g;return d}return!1}
function Nd(a){return a.type==U||"arrow"==a.type?(a="arrow"==a.type?Md(a.geometry):a.geometry,a.width*a.height):"polygon"==a.type?Math.abs(wd(a.geometry.points)):0}function Od(a){if(a.type==U)return a;if("polygon"==a.type){for(var b=a.geometry.points,c=b[0].x,d=b[0].x,e=b[0].y,g=b[0].y,h=1;h<b.length;h++)b[h].x>d&&(d=b[h].x),b[h].x<c&&(c=b[h].x),b[h].y>g&&(g=b[h].y),b[h].y<e&&(e=b[h].y);return new Kd(U,new zd(c,e,d-c,g-e),!1,a.style)}if("arrow"==a.type)return new Kd(U,Md(a.geometry),!1,a.style)}
function Pd(a){if(a.type==U||"arrow"==a.type)return a="arrow"==a.type?Md(a.geometry):a.geometry,new T(a.x+a.width/2,a.y+a.height/2);if("polygon"==a.type)return xd(a.geometry.points)}function Qd(a,b){var c;c=a.geometry.points;var d=0>wd(c)?-1:1;if(4>c.length)c=yd(c,d*b);else{for(var e=c.length-1,g=1,h=[],k=0;k<c.length;k++)e=yd([c[e],c[k],c[g]],d*b),h.push(e[1]),e=k,g++,g>c.length-1&&(g=0);c=h}return new Kd("polygon",new vd(c),!1,a.style)}
function Rd(a,b){if(a.type==U){var c=b(a.geometry);return new Kd(U,c,!1,a.style,a.mask)}if("polygon"==a.type){var d=[];y(a.geometry.points,function(a){d.push(b(a))});return new Kd("polygon",new vd(d),!1,a.style)}if("arrow"==a.type)return new Kd("arrow",new Sd(b(a.geometry.arrowTail),b(a.geometry.arrowHead)),!1,a.style)}function V(a){return JSON.stringify(a.geometry)};function Td(a,b,c,d,e,g){this.id=g;this.src=a;this.text=b;this.textId=e;this.shapes=[c];this.created_at=d||Date.now();this.context=document.URL;this.setMask=this.setMask}Td.prototype.setMask=function(a,b,c,d){if(!b||this.shapes.length>=b)b=0;this.shapes[b].type!=U?console.log("WARNING: impossible to set mask in shape "+this.shapes[b].type):this.shapes[b].mask=a;c&&(this.shapes[b].style.maskTransparency=c);void 0!=d&&(this.shapes[b].style.maskBorder=d)};function Ud(){}function Vd(a,b){a.l=new sd;a.Xc=[];a.Sb=[];a.pb=[];a.lb=[];a.Sc=[];a.oc={Ab:!1,zb:!1};a.mb=new sd;a.Jb={};a.Rd=b}function Wd(a,b){var c=a.mb.get(b);c||(c={Ab:!1,zb:!1},a.mb.set(b,c));return c}
function Xd(a,b){var c=a.zc(b);if(!a.l.get(c)){var d=a.vd(b),e=[],g=[];y(a.Xc,function(a){d.addHandler(a.type,a.sa)});y(a.Sb,function(a){if(a.onInitAnnotator)a.onInitAnnotator(d)});y(a.lb,function(a){a.src==c&&(d.R(a),e.push(a))});y(a.Sc,function(a){a.src==c&&(d.T(a),g.push(a))});y(e,function(b){z(a.lb,b)});y(g,function(b){z(a.Sc,b)});var h=a.mb.get(c);h?(h.Ab&&d.Z(),h.zb&&d.Ca(),a.mb.remove(c)):(a.oc.Ab&&d.Z(),a.oc.zb&&d.Ca());a.Jb&&0!==Object.keys(a.Jb).length&&d.F(a.Jb);a.l.set(c,d);z(a.pb,b)}}
function Yd(a){var b,c;for(c=a.pb.length;0<c;c--){for(var d=b=a.pb[c-1],e=d.offsetTop,g=d.offsetLeft,h=d.offsetWidth,k=d.offsetHeight;d.offsetParent;)d=d.offsetParent,e+=d.offsetTop,g+=d.offsetLeft;e<window.pageYOffset+window.innerHeight&&(g<window.pageXOffset+window.innerWidth&&e+k>window.pageYOffset&&g+h>window.pageXOffset)&&Xd(a,b)}}function Zd(a,b,c){if(b){var d=a.l.get(b);d?c?d.Ta():d.Ca():Wd(a,b).zb=c}else y(S(a.l),function(a){c?a.Ta():a.Ca()}),a.oc.zb=!c,y(S(a.mb),function(a){a.zb=!c})}
function $d(a,b,c){if(b){var d=a.l.get(b);d?c?d.ea():d.Z():Wd(a,b).Ab=c}else y(S(a.l),function(a){c?a.ea():a.Z()}),a.oc.Ab=!c,y(S(a.mb),function(a){a.Ab=!c})}n=Ud.prototype;n.ya=function(a,b){var c=void 0,d=void 0;q(a)?(c=a,d=b):r(a)&&(d=a);c?(c=this.l.get(c))&&c.ya(d):y(S(this.l),function(a){a.ya(d)})};n.stopSelection=function(a){a?(a=this.l.get(a))&&a.stopSelection():y(S(this.l),function(a){a.stopSelection()})};
n.R=function(a,b){if(ae(this,a.src)){var c=this.l.get(a.src);c?c.R(a,b):(this.lb.push(a),b&&z(this.lb,b))}};n.addHandler=function(a,b){y(S(this.l),function(c){c.addHandler(a,b)});this.Xc.push({type:a,sa:b})};n.wa=function(a,b){y(S(this.l),function(c){c.wa(a,b)});y(this.Xc,function(c,d,e){c.type!==a||b&&c.sa!==b||x.splice.call(e,d,1)})};n.rc=function(a){this.Sb.push(a);y(S(this.l),function(b){if(a.onInitAnnotator)a.onInitAnnotator(b)})};
function ae(a,b){return ud(a.l.va,b)?!0:null!=Fa(a.pb,function(c){return a.zc(c)==b})}n.destroy=function(a){if(a){var b=this.l.get(a);b&&(b.destroy(),this.l.remove(a))}else y(S(this.l),function(a){a.destroy()}),this.l.clear()};n.Ka=function(a){if(ae(this,a)&&(a=this.l.get(a)))return a.Ka().getName()};n.M=function(a){if(a){var b=this.l.get(a);return b?b.M():Ca(this.lb,function(b){return b.src==a})}var c=[];y(S(this.l),function(a){Ia(c,a.M())});Ia(c,this.lb);return c};
n.Ba=function(a){if(ae(this,a)&&(a=this.l.get(a)))return Da(a.Ba(),function(a){return a.getName()})};n.Ca=function(a){Zd(this,a,!1)};n.Z=function(a){$d(this,a,!1)};n.J=function(a){if(a){if(ae(this,a.src)){var b=this.l.get(a.src);b&&b.J(a)}}else y(S(this.l),function(a){a.J()})};n.init=function(){this.Rd&&Ia(this.pb,this.Rd());Yd(this);var a=this,b=K(window,"scroll",function(){0<a.pb.length?Yd(a):L(b)})};n.rd=function(a){this.Pc(a)&&Xd(this,a)};
n.T=function(a){if(ae(this,a.src)){var b=this.l.get(a.src);b?b.T(a):this.Sc.push(a)}};n.kc=function(a,b){if(ae(this,a)){var c=this.l.get(a);c&&c.Oc(b)}};function be(a,b,c){b instanceof Object&&0!==Object.keys(b).length&&y(Object.keys(b),function(d){b[d]instanceof Object?(c.hasOwnProperty(d)&&c[d]||(c[d]=b[d]instanceof Array?[]:{}),be(a,b[d],c[d])):c[d]=b[d]})}function ce(a){a.Jb={};a.Ta();a.ea()}
n.F=function(a){a instanceof Object&&0!==Object.keys(a).length&&(be(this,a,this.Jb),a.hasOwnProperty("hideSelectionWidget")&&$d(this,void 0,!a.hideSelectionWidget),a.hasOwnProperty("hideAnnotations")&&Zd(this,void 0,!a.hideAnnotations),y(S(this.l),function(b){b.F(a)}))};n.Ta=function(a){Zd(this,a,!0)};n.fc=function(a,b){var c=this.l.get(a.src);return c?c.fc(a,b):[]};n.ea=function(a){$d(this,a,!0)};var de={},ee={};function fe(a,b){var c=yb().createElement("DIV"),d=ge(a(b||he,void 0,void 0));c.innerHTML=d;return 1==c.childNodes.length&&(d=c.firstChild,1==d.nodeType)?d:c}function ge(a){return ia(a)?"zSoyz":String(a)}var he={};function ie(a,b){null!=a&&this.append.apply(this,arguments)}n=ie.prototype;n.hb="";n.set=function(a){this.hb=""+a};n.append=function(a,b,c){this.hb+=a;if(null!=b)for(var d=1;d<arguments.length;d++)this.hb+=arguments[d];return this};n.clear=function(){this.hb=""};n.toString=m("hb");/*
 Portions of this code are from the google-caja project, received by
 Google under the Apache license (http://code.google.com/p/google-caja/).
 All other code is Copyright 2009 Google, Inc. All Rights Reserved.

// Copyright (C) 2006 Google Inc.
//
// Licensed under the Apache License, Version 2.0 (the "License");
// you may not use this file except in compliance with the License.
// You may obtain a copy of the License at
//
//      http://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an "AS IS" BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
// See the License for the specific language governing permissions and
// limitations under the License.

*/
function je(){}
var ke={lf:"\x3c",kf:"\x3e",df:"\x26",mf:"\u00a0",of:'"',ef:"'"},le={a:0,abbr:0,acronym:0,address:0,applet:16,area:2,b:0,base:18,basefont:18,bdo:0,big:0,blockquote:0,body:49,br:2,button:0,caption:0,center:0,cite:0,code:0,col:2,colgroup:1,dd:1,del:0,dfn:0,dir:0,div:0,dl:0,dt:1,em:0,fieldset:0,font:0,form:0,frame:18,frameset:16,h1:0,h2:0,h3:0,h4:0,h5:0,h6:0,head:49,hr:2,html:49,i:0,iframe:20,img:2,input:2,ins:0,isindex:18,kbd:0,label:0,legend:0,li:1,link:18,map:0,menu:0,meta:18,noframes:20,noscript:20,
object:16,ol:0,optgroup:0,option:1,p:1,param:18,pre:0,q:0,s:0,samp:0,script:20,select:0,small:0,span:0,strike:0,strong:0,style:20,sub:0,sup:0,table:0,tbody:1,td:1,textarea:8,tfoot:1,th:1,thead:1,title:24,tr:1,tt:0,u:0,ul:0,"var":0},me=/&/g,ne=/&([^a-z#]|#(?:[^0-9x]|x(?:[^0-9a-f]|$)|$)|$)/gi,oe=/</g,pe=/>/g,qe=/\"/g,re=/=/g,se=/\0/g,te=/&(#\d+|#x[0-9A-Fa-f]+|\w+);/g,ue=/^#(\d+)$/,ve=/^#x([0-9A-Fa-f]+)$/,we=RegExp("^\\s*(?:(?:([a-z][a-z-]*)(\\s*\x3d\\s*(\"[^\"]*\"|'[^']*'|(?\x3d[a-z][a-z-]*\\s*\x3d)|[^\x3e\"'\\s]*))?)|(/?\x3e)|[^a-z\\s\x3e]+)",
"i"),xe=RegExp("^(?:\x26(\\#[0-9]+|\\#[x][0-9a-f]+|\\w+);|\x3c[!]--[\\s\\S]*?--\x3e|\x3c!\\w[^\x3e]*\x3e|\x3c\\?[^\x3e*]*\x3e|\x3c(/)?([a-z][a-z0-9]*)|([^\x3c\x26\x3e]+)|([\x3c\x26\x3e]))","i");
je.prototype.parse=function(a,b){var c=null,d=!1,e=[],g,h,k;a.ja=[];for(a.Ma=!1;b;){var l=b.match(d?we:xe);b=b.substring(l[0].length);if(d)if(l[1]){var s=l[1].toLowerCase();if(l[2]){l=l[3];switch(l.charCodeAt(0)){case 34:case 39:l=l.substring(1,l.length-1)}l=l.replace(se,"").replace(te,pa(this.Me,this))}else l=s;e.push(s,l)}else l[4]&&(void 0!==h&&(k?a.se&&a.se(g,e):a.Yd&&a.Yd(g)),k&&h&12&&(c=null===c?b.toLowerCase():c.substring(c.length-b.length),d=c.indexOf("\x3c/"+g),0>d&&(d=b.length),h&4?a.Ud&&
a.Ud(b.substring(0,d)):a.pe&&a.pe(b.substring(0,d).replace(ne,"\x26amp;$1").replace(oe,"\x26lt;").replace(pe,"\x26gt;")),b=b.substring(d)),g=h=k=void 0,e.length=0,d=!1);else if(l[1])ye(a,l[0]);else if(l[3])k=!l[2],d=!0,g=l[3].toLowerCase(),h=le.hasOwnProperty(g)?le[g]:void 0;else if(l[4])ye(a,l[4]);else if(l[5])switch(l[5]){case "\x3c":ye(a,"\x26lt;");break;case "\x3e":ye(a,"\x26gt;");break;default:ye(a,"\x26amp;")}}for(c=a.ja.length;0<=--c;)a.Ea.append("\x3c/",a.ja[c],"\x3e");a.ja.length=0};
je.prototype.Me=function(a){a=a.toLowerCase();if(ke.hasOwnProperty(a))return ke[a];var b=a.match(ue);return b?String.fromCharCode(parseInt(b[1],10)):(b=a.match(ve))?String.fromCharCode(parseInt(b[1],16)):""};function ze(){};/*
 Portions of this code are from the google-caja project, received by
 Google under the Apache license (http://code.google.com/p/google-caja/).
 All other code is Copyright 2009 Google, Inc. All Rights Reserved.

// Copyright (C) 2006 Google Inc.
//
// Licensed under the Apache License, Version 2.0 (the "License");
// you may not use this file except in compliance with the License.
// You may obtain a copy of the License at
//
//      http://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an "AS IS" BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
// See the License for the specific language governing permissions and
// limitations under the License.

*/
function Ae(a,b){var c=new ie;(new je).parse(new Be(c,b,void 0),a);return c.toString()}function Be(a,b,c){this.Ea=a;this.ja=[];this.Ma=!1;this.we=b;this.Hc=c}t(Be,ze);
var Ce={"*::class":9,"*::dir":0,"*::id":4,"*::lang":0,"*::onclick":2,"*::ondblclick":2,"*::onkeydown":2,"*::onkeypress":2,"*::onkeyup":2,"*::onload":2,"*::onmousedown":2,"*::onmousemove":2,"*::onmouseout":2,"*::onmouseover":2,"*::onmouseup":2,"*::style":3,"*::title":0,"*::accesskey":0,"*::tabindex":0,"*::onfocus":2,"*::onblur":2,"a::coords":0,"a::href":1,"a::hreflang":0,"a::name":7,"a::onblur":2,"a::rel":0,"a::rev":0,"a::shape":0,"a::target":10,"a::type":0,"area::accesskey":0,"area::alt":0,"area::coords":0,
"area::href":1,"area::nohref":0,"area::onfocus":2,"area::shape":0,"area::tabindex":0,"area::target":10,"bdo::dir":0,"blockquote::cite":1,"br::clear":0,"button::accesskey":0,"button::disabled":0,"button::name":8,"button::onblur":2,"button::onfocus":2,"button::tabindex":0,"button::type":0,"button::value":0,"caption::align":0,"col::align":0,"col::char":0,"col::charoff":0,"col::span":0,"col::valign":0,"col::width":0,"colgroup::align":0,"colgroup::char":0,"colgroup::charoff":0,"colgroup::span":0,"colgroup::valign":0,
"colgroup::width":0,"del::cite":1,"del::datetime":0,"dir::compact":0,"div::align":0,"dl::compact":0,"font::color":0,"font::face":0,"font::size":0,"form::accept":0,"form::action":1,"form::autocomplete":0,"form::enctype":0,"form::method":0,"form::name":7,"form::onreset":2,"form::onsubmit":2,"form::target":10,"h1::align":0,"h2::align":0,"h3::align":0,"h4::align":0,"h5::align":0,"h6::align":0,"hr::align":0,"hr::noshade":0,"hr::size":0,"hr::width":0,"img::align":0,"img::alt":0,"img::border":0,"img::height":0,
"img::hspace":0,"img::ismap":0,"img::longdesc":1,"img::name":7,"img::src":1,"img::usemap":11,"img::vspace":0,"img::width":0,"input::accept":0,"input::accesskey":0,"input::autocomplete":0,"input::align":0,"input::alt":0,"input::checked":0,"input::disabled":0,"input::ismap":0,"input::maxlength":0,"input::name":8,"input::onblur":2,"input::onchange":2,"input::onfocus":2,"input::onselect":2,"input::readonly":0,"input::size":0,"input::src":1,"input::tabindex":0,"input::type":0,"input::usemap":11,"input::value":0,
"ins::cite":1,"ins::datetime":0,"label::accesskey":0,"label::for":5,"label::onblur":2,"label::onfocus":2,"legend::accesskey":0,"legend::align":0,"li::type":0,"li::value":0,"map::name":7,"menu::compact":0,"ol::compact":0,"ol::start":0,"ol::type":0,"optgroup::disabled":0,"optgroup::label":0,"option::disabled":0,"option::label":0,"option::selected":0,"option::value":0,"p::align":0,"pre::width":0,"q::cite":1,"select::disabled":0,"select::multiple":0,"select::name":8,"select::onblur":2,"select::onchange":2,
"select::onfocus":2,"select::size":0,"select::tabindex":0,"table::align":0,"table::bgcolor":0,"table::border":0,"table::cellpadding":0,"table::cellspacing":0,"table::frame":0,"table::rules":0,"table::summary":0,"table::width":0,"tbody::align":0,"tbody::char":0,"tbody::charoff":0,"tbody::valign":0,"td::abbr":0,"td::align":0,"td::axis":0,"td::bgcolor":0,"td::char":0,"td::charoff":0,"td::colspan":0,"td::headers":6,"td::height":0,"td::nowrap":0,"td::rowspan":0,"td::scope":0,"td::valign":0,"td::width":0,
"textarea::accesskey":0,"textarea::cols":0,"textarea::disabled":0,"textarea::name":8,"textarea::onblur":2,"textarea::onchange":2,"textarea::onfocus":2,"textarea::onselect":2,"textarea::readonly":0,"textarea::rows":0,"textarea::tabindex":0,"tfoot::align":0,"tfoot::char":0,"tfoot::charoff":0,"tfoot::valign":0,"th::abbr":0,"th::align":0,"th::axis":0,"th::bgcolor":0,"th::char":0,"th::charoff":0,"th::colspan":0,"th::headers":6,"th::height":0,"th::nowrap":0,"th::rowspan":0,"th::scope":0,"th::valign":0,
"th::width":0,"thead::align":0,"thead::char":0,"thead::charoff":0,"thead::valign":0,"tr::align":0,"tr::bgcolor":0,"tr::char":0,"tr::charoff":0,"tr::valign":0,"ul::compact":0,"ul::type":0};
Be.prototype.se=function(a,b){if(!this.Ma&&le.hasOwnProperty(a)){var c=le[a];if(!(c&32))if(c&16)this.Ma=!(c&2);else{for(var d=b,e=0;e<d.length;e+=2){var g=d[e],h=d[e+1],k=null,l;if((l=a+"::"+g,Ce.hasOwnProperty(l))||(l="*::"+g,Ce.hasOwnProperty(l)))k=Ce[l];if(null!==k)switch(k){case 0:break;case 2:case 3:h=null;break;case 4:case 5:case 6:case 7:case 8:case 9:h=this.Hc?this.Hc(h):h;break;case 1:h=this.we&&this.we(h);break;case 11:h&&"#"===h.charAt(0)?(h=this.Hc?this.Hc(h):h)&&(h="#"+h):h=null;break;
default:h=null}else h=null;d[e+1]=h}if(b=d){c&2||this.ja.push(a);this.Ea.append("\x3c",a);c=0;for(d=b.length;c<d;c+=2)e=b[c],g=b[c+1],null!==g&&void 0!==g&&this.Ea.append(" ",e,'\x3d"',g.replace(me,"\x26amp;").replace(oe,"\x26lt;").replace(pe,"\x26gt;").replace(qe,"\x26#34;").replace(re,"\x26#61;"),'"');this.Ea.append("\x3e")}}}};
Be.prototype.Yd=function(a){if(this.Ma)this.Ma=!1;else if(le.hasOwnProperty(a)){var b=le[a];if(!(b&50)){if(b&1)for(b=this.ja.length;0<=--b;){var c=this.ja[b];if(c===a)break;if(!(le[c]&1))return}else for(b=this.ja.length;0<=--b&&this.ja[b]!==a;);if(!(0>b)){for(var d=this.ja.length;--d>b;)c=this.ja[d],le[c]&1||this.Ea.append("\x3c/",c,"\x3e");this.ja.length=b;this.Ea.append("\x3c/",a,"\x3e")}}}};function ye(a,b){a.Ma||a.Ea.append(b)}Be.prototype.pe=function(a){this.Ma||this.Ea.append(a)};
Be.prototype.Ud=function(a){this.Ma||this.Ea.append(a)};function De(a,b,c,d,e){if(!(C||E&&F("525")))return!0;if(Sa&&e)return Ee(a);if(e&&!d||!c&&(17==b||18==b||Sa&&91==b))return!1;if(E&&d&&c)switch(a){case 220:case 219:case 221:case 192:case 186:case 189:case 187:case 188:case 190:case 191:case 192:case 222:return!1}if(C&&d&&b==a)return!1;switch(a){case 13:return!(C&&C&&9<=hb);case 27:return!E}return Ee(a)}
function Ee(a){if(48<=a&&57>=a||96<=a&&106>=a||65<=a&&90>=a||E&&0==a)return!0;switch(a){case 32:case 63:case 107:case 109:case 110:case 111:case 186:case 59:case 189:case 187:case 61:case 188:case 190:case 191:case 192:case 222:case 219:case 220:case 221:return!0;default:return!1}}function Fe(a){switch(a){case 61:return 187;case 59:return 186;case 224:return 91;case 0:return 224;default:return a}};function Ge(a,b){Cc.call(this);a&&He(this,a,b)}t(Ge,Cc);n=Ge.prototype;n.L=null;n.Dc=null;n.pd=null;n.Ec=null;n.da=-1;n.Na=-1;n.cd=!1;
var Ie={3:13,12:144,63232:38,63233:40,63234:37,63235:39,63236:112,63237:113,63238:114,63239:115,63240:116,63241:117,63242:118,63243:119,63244:120,63245:121,63246:122,63247:123,63248:44,63272:46,63273:36,63275:35,63276:33,63277:34,63289:144,63302:45},Je={Up:38,Down:40,Left:37,Right:39,Enter:13,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,"U+007F":46,Home:36,End:35,PageUp:33,PageDown:34,Insert:45},Ke=C||E&&F("525"),Le=Sa&&D;n=Ge.prototype;
n.Ge=function(a){E&&(17==this.da&&!a.ctrlKey||18==this.da&&!a.altKey||Sa&&91==this.da&&!a.metaKey)&&(this.Na=this.da=-1);-1==this.da&&(a.ctrlKey&&17!=a.keyCode?this.da=17:a.altKey&&18!=a.keyCode?this.da=18:a.metaKey&&91!=a.keyCode&&(this.da=91));Ke&&!De(a.keyCode,this.da,a.shiftKey,a.ctrlKey,a.altKey)?this.handleEvent(a):(this.Na=D?Fe(a.keyCode):a.keyCode,Le&&(this.cd=a.altKey))};n.Ie=function(a){this.Na=this.da=-1;this.cd=a.altKey};
n.handleEvent=function(a){var b=a.C,c,d,e=b.altKey;C&&"keypress"==a.type?(c=this.Na,d=13!=c&&27!=c?b.keyCode:0):E&&"keypress"==a.type?(c=this.Na,d=0<=b.charCode&&63232>b.charCode&&Ee(c)?b.charCode:0):B?(c=this.Na,d=Ee(c)?b.keyCode:0):(c=b.keyCode||this.Na,d=b.charCode||0,Le&&(e=this.cd),Sa&&(63==d&&224==c)&&(c=191));var g=c,h=b.keyIdentifier;c?63232<=c&&c in Ie?g=Ie[c]:25==c&&a.shiftKey&&(g=9):h&&h in Je&&(g=Je[h]);a=g==this.da;this.da=g;b=new Me(g,d,a,b);b.altKey=e;this.dispatchEvent(b)};n.j=m("L");
function He(a,b,c){a.Ec&&a.detach();a.L=b;a.Dc=K(a.L,"keypress",a,c);a.pd=K(a.L,"keydown",a.Ge,c,a);a.Ec=K(a.L,"keyup",a.Ie,c,a)}n.detach=function(){this.Dc&&(L(this.Dc),L(this.pd),L(this.Ec),this.Ec=this.pd=this.Dc=null);this.L=null;this.Na=this.da=-1};n.S=function(){Ge.G.S.call(this);this.detach()};function Me(a,b,c,d){d&&this.init(d,void 0);this.type="key";this.keyCode=a;this.charCode=b;this.repeat=c}t(Me,dc);function Ne(){}da(Ne);Ne.prototype.Re=0;Ne.ec();function Oe(a){Cc.call(this);this.Zb=a||yb();this.Ra=Pe}t(Oe,Cc);Oe.prototype.Ke=Ne.ec();var Pe=null;function Qe(a,b){switch(a){case 1:return b?"disable":"enable";case 2:return b?"highlight":"unhighlight";case 4:return b?"activate":"deactivate";case 8:return b?"select":"unselect";case 16:return b?"check":"uncheck";case 32:return b?"focus":"blur";case 64:return b?"open":"close"}throw Error("Invalid component state");}n=Oe.prototype;n.Bc=null;n.ta=!1;n.L=null;n.Ra=null;n.Oe=null;n.Oa=null;n.uc=null;
n.ib=null;n.xe=!1;function Re(a,b){if(a.Oa&&a.Oa.ib){var c=a.Oa.ib,d=a.Bc;d in c&&delete c[d];c=a.Oa.ib;if(b in c)throw Error('The object already contains the key "'+b+'"');c[b]=a}a.Bc=b}n.j=m("L");n.yc=function(){return this.xb||(this.xb=new yc(this))};n.Ed=function(a){if(this.Oa&&this.Oa!=a)throw Error("Method not supported");Oe.G.Ed.call(this,a)};n.$d=m("Zb");
n.Yb=function(a){if(this.ta)throw Error("Component already rendered");if(a&&this.Xb(a)){this.xe=!0;var b=H(a);this.Zb&&this.Zb.ca==b||(this.Zb=yb(a));this.Vd(a);this.vb()}else throw Error("Invalid element to decorate");};n.Xb=aa(!0);n.Vd=function(a){this.L=a};n.vb=function(){this.ta=!0;Se(this,function(a){!a.ta&&a.j()&&a.vb()})};n.bc=function(){Se(this,function(a){a.ta&&a.bc()});this.xb&&this.xb.Qa();this.ta=!1};
n.S=function(){this.ta&&this.bc();this.xb&&(this.xb.ub(),delete this.xb);Se(this,function(a){a.ub()});!this.xe&&this.L&&Ib(this.L);this.Oa=this.Oe=this.L=this.ib=this.uc=null;Oe.G.S.call(this)};n.cc=m("L");n.Eb=function(a){if(this.ta)throw Error("Component already rendered");this.Ra=a};function Se(a,b){a.uc&&y(a.uc,b,void 0)}
n.removeChild=function(a,b){if(a){var c=q(a)?a:a.Bc||(a.Bc=":"+(a.Ke.Re++).toString(36)),d;this.ib&&c?(d=this.ib,d=(c in d?d[c]:void 0)||null):d=null;a=d;if(c&&a){d=this.ib;c in d&&delete d[c];z(this.uc,a);b&&(a.bc(),a.L&&Ib(a.L));c=a;if(null==c)throw Error("Unable to set parent component");c.Oa=null;Oe.G.Ed.call(c,null)}}if(!a)throw Error("Child is not in parent component");return a};var Te;function Ue(a,b,c){ha(c)&&(c=c.join(" "));var d="aria-"+b;""===c||void 0==c?(Te||(Te={atomic:!1,autocomplete:"none",dropeffect:"none",haspopup:!1,live:"off",multiline:!1,multiselectable:!1,orientation:"vertical",readonly:!1,relevant:"additions text",required:!1,sort:"none",busy:!1,disabled:!1,hidden:!1,invalid:"false"}),c=Te,b in c?a.setAttribute(d,c[b]):a.removeAttribute(d)):a.setAttribute(d,c)};function Ve(){}var We;da(Ve);n=Ve.prototype;n.cc=function(a){return a};n.$b=function(a,b,c){if(a=a.j?a.j():a)if(C&&!F("7")){var d=Xe(ob(a),b);d.push(b);qa(c?pb:rb,a).apply(null,d)}else c?pb(a,b):rb(a,b)};n.Xb=aa(!0);
n.Yb=function(a,b){b.id&&Re(a,b.id);var c=this.cc(b);c&&c.firstChild?Ye(a,c.firstChild.nextSibling?Ha(c.childNodes):c.firstChild):a.rb=null;var d=0,e=this.dc(),g=this.dc(),h=!1,k=!1,c=!1,l=ob(b);y(l,function(a){if(h||a!=e)if(k||a!=g){var b=d;if(!this.ve){this.vc||Ze(this);var c=this.vc,l={},s;for(s in c)l[c[s]]=s;this.ve=l}a=parseInt(this.ve[a],10);d=b|(isNaN(a)?0:a)}else k=!0;else h=!0,g==e&&(k=!0)},this);a.N=d;h||(l.push(e),g==e&&(k=!0));k||l.push(g);var s=a.ra;s&&l.push.apply(l,s);if(C&&!F("7")){var w=
Xe(l);0<w.length&&(l.push.apply(l,w),c=!0)}if(!h||!k||s||c)b.className=l.join(" ");$e(this,a,b);return b};function $e(a,b,c){b.Gb||Ue(c,"hidden",!b.Gb);b.isEnabled()||a.Fb(c,1,!b.isEnabled());b.ka&8&&a.Fb(c,8,!!(b.N&8));b.ka&16&&a.Fb(c,16,!!(b.N&16));b.ka&64&&a.Fb(c,64,!!(b.N&64))}
n.Nc=function(a,b){var c=!b,d=C||B?a.getElementsByTagName("*"):null;if(Xc){if(c=c?"none":"",a.style[Xc]=c,d)for(var e=0,g;g=d[e];e++)g.style[Xc]=c}else if(C||B)if(c=c?"on":"",a.setAttribute("unselectable",c),d)for(e=0;g=d[e];e++)g.setAttribute("unselectable",c)};n.Eb=function(a,b){this.$b(a,this.dc()+"-rtl",b)};n.le=function(a){var b;return a.ka&32&&(b=a.wb())?Ob(b):!1};
n.Dd=function(a,b){var c;if(a.ka&32&&(c=a.wb())){if(!b&&a.N&32){try{c.blur()}catch(d){}a.N&32&&a.ae()}Ob(c)!=b&&(b?c.tabIndex=0:(c.tabIndex=-1,c.removeAttribute("tabIndex")))}};n.ia=function(a,b,c){var d=a.j();if(d){var e;this.vc||Ze(this);(e=this.vc[b])&&this.$b(a,e,c);this.Fb(d,b,c)}};n.Fb=function(a,b,c){We||(We={1:"disabled",8:"selected",16:"checked",64:"expanded"});(b=We[b])&&Ue(a,b,c)};
n.Sa=function(a,b){var c=this.cc(a);if(c&&(Gb(c),b))if(q(b))Nb(c,b);else{var d=function(a){if(a){var b=H(c);c.appendChild(q(a)?b.createTextNode(a):a)}};ga(b)?y(b,d):!ha(b)||"nodeType"in b?d(b):y(Ha(b),d)}};n.wb=function(a){return a.j()};n.dc=aa("goog-control");function Xe(a,b){var c=[];b&&(a=a.concat([b]));y([],function(d){!Ea(d,qa(Ga,a))||b&&!Ga(d,b)||c.push(d.join("_"))});return c}
function Ze(a){var b=a.dc();a.vc={1:b+"-disabled",2:b+"-hover",4:b+"-active",8:b+"-selected",16:b+"-checked",32:b+"-focused",64:b+"-open"}};var af={};function W(a,b,c){Oe.call(this,c);if(!b){b=this.constructor;for(var d;b;){d=ja(b);if(d=af[d])break;b=b.G?b.G.constructor:null}b=d?r(d.ec)?d.ec():new d:null}this.U=b;this.rb=a}t(W,Oe);n=W.prototype;n.rb=null;n.N=0;n.ka=39;n.fd=255;n.Ze=0;n.Gb=!0;n.ra=null;n.nd=!0;n.bd=!1;n.Ue=null;function bf(a){a.ta&&!1!=a.nd&&cf(a,!1);a.nd=!1}n.wb=function(){return this.U.wb(this)};function df(a,b){b&&(a.ra?Ga(a.ra,b)||a.ra.push(b):a.ra=[b],a.U.$b(a,b,!0))}
function ef(a,b){b&&(a.ra&&z(a.ra,b))&&(0==a.ra.length&&(a.ra=null),a.U.$b(a,b,!1))}n.$b=function(a,b){b?df(this,a):ef(this,a)};n.cc=function(){return this.U.cc(this.j())};n.Xb=function(a){return this.U.Xb(a)};n.Vd=function(a){this.L=a=this.U.Yb(this,a);var b=this.Ue||void 0;if(b){var c=a;b?c.setAttribute("role",b):c.removeAttribute("role")}this.bd||this.U.Nc(a,!1);this.Gb="none"!=a.style.display};
n.vb=function(){W.G.vb.call(this);var a=this.U;null==this.Ra&&(this.Ra=Wc(this.ta?this.L:this.Zb.ca.body));this.Ra&&a.Eb(this.j(),!0);this.isEnabled()&&a.Dd(this,this.Gb);if(this.ka&-2&&(this.nd&&cf(this,!0),this.ka&32&&(a=this.wb()))){var b=this.Cb||(this.Cb=new Ge);He(b,a);this.yc().w(b,"key",this.He).w(a,"focus",this.Fe).w(a,"blur",this.ae)}};
function cf(a,b){var c=a.yc(),d=a.j();b?(c.w(d,"mouseover",a.ee).w(d,"mousedown",a.ce).w(d,"mouseup",a.fe).w(d,"mouseout",a.de),a.Ac!=ca&&c.w(d,"contextmenu",a.Ac),C&&c.w(d,"dblclick",a.be)):(c.Fa(d,"mouseover",a.ee).Fa(d,"mousedown",a.ce).Fa(d,"mouseup",a.fe).Fa(d,"mouseout",a.de),a.Ac!=ca&&c.Fa(d,"contextmenu",a.Ac),C&&c.Fa(d,"dblclick",a.be))}n.bc=function(){W.G.bc.call(this);this.Cb&&this.Cb.detach();this.Gb&&this.isEnabled()&&this.U.Dd(this,!1)};
n.S=function(){W.G.S.call(this);this.Cb&&(this.Cb.ub(),delete this.Cb);delete this.U;this.ra=this.rb=null};n.Sa=function(a){this.U.Sa(this.j(),a);this.rb=a};function Ye(a,b){a.rb=b}n.Eb=function(a){W.G.Eb.call(this,a);var b=this.j();b&&this.U.Eb(b,a)};n.Nc=function(a){this.bd=a;var b=this.j();b&&this.U.Nc(b,a)};n.isEnabled=function(){return!(this.N&1)};function ff(a,b){gf(a,2,b)&&a.ia(2,b)}n.setActive=function(a){gf(this,4,a)&&this.ia(4,a)};
n.ia=function(a,b){this.ka&a&&b!=!!(this.N&a)&&(this.U.ia(this,a,b),this.N=b?this.N|a:this.N&~a)};function X(a,b){return!!(a.fd&b)&&!!(a.ka&b)}function gf(a,b,c){return!!(a.ka&b)&&!!(a.N&b)!=c&&(!(a.Ze&b)||a.dispatchEvent(Qe(b,c)))&&!a.wc}n.ee=function(a){(!a.relatedTarget||!Mb(this.j(),a.relatedTarget))&&(this.dispatchEvent("enter")&&this.isEnabled()&&X(this,2))&&ff(this,!0)};
n.de=function(a){a.relatedTarget&&Mb(this.j(),a.relatedTarget)||!this.dispatchEvent("leave")||(X(this,4)&&this.setActive(!1),X(this,2)&&ff(this,!1))};n.Ac=ca;n.ce=function(a){this.isEnabled()&&(X(this,2)&&ff(this,!0),fc(a)&&(X(this,4)&&this.setActive(!0),this.U.le(this)&&this.wb().focus()));!this.bd&&fc(a)&&a.preventDefault()};n.fe=function(a){this.isEnabled()&&(X(this,2)&&ff(this,!0),this.N&4&&(hf(this,a)&&X(this,4))&&this.setActive(!1))};n.be=function(a){this.isEnabled()&&hf(this,a)};
function hf(a,b){if(X(a,16)){var c=!(a.N&16);gf(a,16,c)&&a.ia(16,c)}X(a,8)&&gf(a,8,!0)&&a.ia(8,!0);X(a,64)&&(c=!(a.N&64),gf(a,64,c)&&a.ia(64,c));c=new ac("action",a);b&&(c.altKey=b.altKey,c.ctrlKey=b.ctrlKey,c.metaKey=b.metaKey,c.shiftKey=b.shiftKey,c.xd=b.xd);return a.dispatchEvent(c)}n.Fe=function(){X(this,32)&&gf(this,32,!0)&&this.ia(32,!0)};n.ae=function(){X(this,4)&&this.setActive(!1);X(this,32)&&gf(this,32,!1)&&this.ia(32,!1)};
n.He=function(a){return this.Gb&&this.isEnabled()&&13==a.keyCode&&hf(this,a)?(a.preventDefault(),a.stopPropagation(),!0):!1};if(!r(W))throw Error("Invalid component class "+W);if(!r(Ve))throw Error("Invalid renderer class "+Ve);var jf=ja(W);af[jf]=Ve;function nf(){return new W(null)}if(!r(nf))throw Error("Invalid decorator function "+nf);function of(){}t(of,Ve);da(of);n=of.prototype;n.Yb=function(a,b){bf(a);a.fd&=-256;if(a.ta&&a.N&32)throw Error("Component already rendered");a.N&32&&a.ia(32,!1);a.ka&=-33;of.G.Yb.call(this,a,b);a.Sa(b.value);return b};n.Xb=function(a){return"TEXTAREA"==a.tagName};n.Eb=ca;n.le=function(a){return a.isEnabled()};n.Dd=ca;n.ia=function(a,b,c){of.G.ia.call(this,a,b,c);(a=a.j())&&1==b&&(a.disabled=c)};n.Fb=ca;n.Sa=function(a,b){a&&(a.value=b)};n.dc=aa("goog-textarea");function pf(a,b,c){W.call(this,a,b||of.ec(),c);bf(this);this.Nc(!0);a||(this.rb="")}t(pf,W);var qf=D||E;n=pf.prototype;n.Bb=!1;n.La=0;n.Ne=0;n.ne=0;n.he=!1;n.Gc=!1;n.Bd=!1;n.Ad=!1;function rf(a){return a.jc.top+a.jc.bottom+a.Td.top+a.Td.bottom}function sf(a){var b=a.ne,c=a.j();b&&(c&&a.Gc)&&(b-=rf(a));return b}function tf(a){var b=a.Ne,c=a.j();b&&(c&&a.Gc)&&(b-=rf(a));return b}n.Sa=function(a){pf.G.Sa.call(this,a);this.j()&&this.yb()};
n.vb=function(){pf.G.vb.call(this);var a=this.j();M(a,{overflowY:"hidden",overflowX:"auto",boxSizing:"border-box",MsBoxSizing:"border-box",WebkitBoxSizing:"border-box",MozBoxSizing:"border-box"});this.jc=$c(a,"padding");this.Td=cd(a);this.yc().w(a,"scroll",this.yb).w(a,"focus",this.yb).w(a,"keyup",this.yb).w(a,"mouseup",this.Qe);this.j()&&this.yb()};
function uf(a){if(!a.he){var b=a.j().cloneNode(!1);M(b,{position:"absolute",height:"auto",top:"-9999px",margin:"0",padding:"1px",border:"1px solid #000",overflow:"hidden"});a.$d().ca.body.appendChild(b);var c=b.scrollHeight;b.style.padding="10px";var d=b.scrollHeight;a.Bd=d>c;b.style.borderWidth="10px";a.Ad=b.scrollHeight>d;b.style.height="100px";100!=b.offsetHeight&&(a.Gc=!0);Ib(b);a.he=!0}var b=a.j(),c=a.j().scrollHeight,e=a.j(),d=e.offsetHeight-e.clientHeight;if(!a.Bd)var g=a.jc,d=d-(g.top+g.bottom);
a.Ad||(e=cd(e),d-=e.top+e.bottom);c+=0<d?d:0;a.Gc?c-=rf(a):(a.Bd||(d=a.jc,c+=d.top+d.bottom),a.Ad||(a=cd(b),c+=a.top+a.bottom));return c}function vf(a,b){a.La!=b&&(a.La=b,a.j().style.height=b+"px")}function wf(a){a=a.j();a.style.height="auto";var b=a.value.match(/\n/g)||[];a.rows=b.length+1}
n.yb=function(){if(!this.Bb){var a=!1;this.Bb=!0;var b=this.j(),c=this.La;if(b.scrollHeight){var d=!1,e=!1,g=uf(this),h=b.offsetHeight,k=sf(this),l=tf(this);k&&g<k?(vf(this,k),d=!0):l&&g>l?(vf(this,l),b.style.overflowY="",e=!0):h!=g?vf(this,g):this.La||(this.La=g);d||(e||!qf)||(a=!0)}else wf(this);this.Bb=!1;a&&(a=this.j(),this.Bb||(this.Bb=!0,(d=a.scrollHeight)?(e=uf(this),b=sf(this),g=tf(this),b&&e<=b||g&&e>=g||(g=this.jc,a.style.paddingBottom=g.bottom+1+"px",uf(this)==e&&(a.style.paddingBottom=
g.bottom+d+"px",a.scrollTop=0,d=uf(this)-d,d>=b?vf(this,d):vf(this,b)),a.style.paddingBottom=g.bottom+"px")):wf(this),this.Bb=!1));c!=this.La&&this.dispatchEvent("resize")}};n.Qe=function(){var a=this.j(),b=a.offsetHeight;a.filters&&a.filters.length&&(a=a.filters.item("DXImageTransform.Microsoft.DropShadow"))&&(b-=a.offX);b!=this.La&&(this.La=this.ne=b)};C&&F(8);function xf(a){return a&&a.gd&&a.gd===de?a.content:String(a).replace(yf,zf)}var Af={"\x00":"\x26#0;",'"':"\x26quot;","\x26":"\x26amp;","'":"\x26#39;","\x3c":"\x26lt;","\x3e":"\x26gt;","\t":"\x26#9;","\n":"\x26#10;","\x0B":"\x26#11;","\f":"\x26#12;","\r":"\x26#13;"," ":"\x26#32;","-":"\x26#45;","/":"\x26#47;","\x3d":"\x26#61;","`":"\x26#96;","\u0085":"\x26#133;","\u00a0":"\x26#160;","\u2028":"\x26#8232;","\u2029":"\x26#8233;"};function zf(a){return Af[a]}var yf=/[\x00\x22\x26\x27\x3c\x3e]/g;function Bf(){return'\x3cdiv class\x3d"annotorious-popup top-left" style\x3d"position:absolute;z-index:1"\x3e\x3cdiv class\x3d"annotorious-popup-buttons"\x3e\x3cdiv\x3e\x3ca role\x3d"button" class\x3d"annotorious-popup-button annotorious-popup-button-edit" title\x3d"Edit"\x3eEDIT\x3c/a\x3e\x3ca role\x3d"button" class\x3d"annotorious-popup-button annotorious-popup-button-delete" title\x3d"Delete"\x3eDELETE\x3c/a\x3e\x3c/div\x3e\x3cdiv\x3e\x3ca role\x3d"button" class\x3d"annotorious-popup-button annotorious-popup-button-move" title\x3d"Move"\x3eMOVE\x3c/a\x3e\x3ca role\x3d"button" class\x3d"annotorious-popup-button annotorious-popup-button-rotate" title\x3d"Rotate"\x3eROTATE\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e\x3cspan class\x3d"annotorious-popup-text"\x3e\x3c/span\x3e\x3c/div\x3e'}
function Cf(){return'\x3cdiv class\x3d"annotorious-editor" style\x3d"position:absolute;z-index:1"\x3e\x3cform\x3e\x3ctextarea class\x3d"annotorious-editor-text" placeholder\x3d"Add a Comment..." tabindex\x3d"1"\x3e\x3c/textarea\x3e\x3cdiv class\x3d"annotorious-editor-button-container"\x3e\x3ca role\x3d"button" class\x3d"annotorious-editor-button annotorious-editor-button-cancel" tabindex\x3d"3"\x3eCancel\x3c/a\x3e\x3ca role\x3d"button" class\x3d"annotorious-editor-button annotorious-editor-button-save" tabindex\x3d"2"\x3eSave\x3c/a\x3e\x3c/div\x3e\x3c/form\x3e\x3c/div\x3e'}
;function Df(a){this.element=fe(Cf);this.d=a;this.ye=a.getItem();this.ga=new pf("");this.Rc=I(".annotorious-editor-button-cancel",this.element)[0];this.nc=I(".annotorious-editor-button-save",this.element)[0];this.Id=Lb(this.nc);this.Nb=[];this.gb=!1;this.c={ac:!0,zd:!1,Ua:{placeholder:"Add a Comment...",className:"annotorious-editor-text"},buttons:{save:{text:"Save",className:"annotorious-editor-button annotorious-editor-button-save"},abort:{text:"Cancel",className:"annotorious-editor-button annotorious-editor-button-cancel"}},
Aa:void 0};this.g=JSON.parse(JSON.stringify(this.c));var b=this;K(this.Rc,"click",function(c){c.preventDefault();a.stopSelection(b.Qb);b.close()});K(this.nc,"click",function(c){c.preventDefault();if(!b.gb||!b.n.options[0].disabled||0!=b.n.selectedIndex&&b.n.value){c=b.Qb?{text:b.Qb.text,textId:b.Qb.textId}:void 0;var d=b.Zd();a.R(d);a.stopSelection();b.Qb?a.fireEvent("onAnnotationUpdated",d,c):a.fireEvent("onAnnotationCreated",d,a.getItem());b.close()}});R(this.element,!1);a.element.appendChild(this.element);
this.ga.Yb(I(".annotorious-editor-text",this.element)[0]);pd(this.element,function(){var a=b.ga;a.j()&&a.yb()})}n=Df.prototype;n.Wb=function(a){var b=Eb("div","annotorious-editor-field");q(a)?b.innerHTML=a:r(a)?this.Nb.push({Y:b,kd:a}):Kb(a)&&b.appendChild(a);Hb(b,this.Id)};
n.open=function(a){this.d.fireEvent("beforeEditorShown",a);this.nb=this.Qb=a;R(this.element,!0);this.gb?this.c.ac?(this.n.classList.remove("d-none"),a&&-1<this.n.innerHTML.indexOf('value\x3d"'+a.text+'"')?this.n.value=a.text:this.n.options[0].selected=!0):this.n.classList.add("d-none"):this.c.ac?(ef(this.ga,"d-none"),a&&this.ga.Sa(String(a.text)),this.ga.j().focus()):df(this.ga,"d-none");y(this.Nb,function(b){var c=b.kd(a);q(c)?b.Y.innerHTML=c:Kb(c)&&(Gb(b.Y),b.Y.appendChild(c))});this.d.fireEvent("onEditorShown",
a)};n.close=function(){R(this.element,!1);this.gb?this.n.value="":this.ga.Sa("")};n.setPosition=function(a){Kc(this.element,a.x,a.y)};n.Zd=function(){var a=Ae(this.gb?this.n.value:this.ga.j().value,function(a){return a}),b=this.gb?this.n.options[this.n.selectedIndex].getAttribute("valueid"):void 0;this.nb?(this.nb.text=self.c.ac?a:void 0,this.nb.textId=b):(this.nb=new Td(this.ye.src,a,this.d.Ka().getShape(),void 0,b),this.nb.editable=!this.c.zd);return this.nb};
n.F=function(a){a instanceof Object&&0!==Object.keys(a).length?(a.hasOwnProperty("enterText")&&(this.c.ac="boolean"===typeof a.enterText?a.enterText:this.g.ac),a.hasOwnProperty("saveReadOnly")&&(this.c.zd=a.saveReadOnly||this.g.zd),a.hasOwnProperty("textarea")&&(a.textarea instanceof Object&&0!==Object.keys(a.textarea).length?(a.textarea.hasOwnProperty("placeholder")&&(this.c.Ua.placeholder=a.textarea.placeholder||this.g.Ua.placeholder),a.textarea.hasOwnProperty("className")&&(this.c.Ua.className=
a.textarea.className||this.g.Ua.className)):this.c.Ua=Object.assign({},this.g.Ua)),a.hasOwnProperty("buttons")&&(a.buttons instanceof Object&&0!==Object.keys(a.buttons).length?(a.buttons.hasOwnProperty("save")&&(a.buttons.save instanceof Object&&0!==Object.keys(a.buttons.save).length?(a.buttons.save.hasOwnProperty("text")&&(this.c.buttons.save.text=a.buttons.save.text||this.g.buttons.save.text),a.buttons.save.hasOwnProperty("className")&&(this.c.buttons.save.className=a.buttons.save.className||this.g.buttons.save.className)):
this.c.buttons.save=Object.assign({},this.g.buttons.save)),a.buttons.hasOwnProperty("abort")&&(a.buttons.abort instanceof Object&&0!==Object.keys(a.buttons.abort).length?(a.buttons.abort.hasOwnProperty("text")&&(this.c.buttons.abort.text=a.buttons.abort.text||this.g.buttons.abort.text),a.buttons.abort.hasOwnProperty("className")&&(this.c.buttons.abort.className=a.buttons.abort.className||this.g.buttons.abort.className)):this.c.buttons.abort=Object.assign({},this.g.buttons.abort))):this.c.buttons=
JSON.parse(JSON.stringify(this.g.buttons))),a.hasOwnProperty("extraFields")&&(this.c.Aa=a.extraFields)):this.c=JSON.parse(JSON.stringify(this.g));this.ga.j().placeholder=this.c.Ua.placeholder;this.ga.j().className=this.c.Ua.className;this.nc.innerHTML=this.c.buttons.save.text;this.nc.className=this.c.buttons.save.className;this.Rc.innerHTML=this.c.buttons.abort.text;this.Rc.className=this.c.buttons.abort.className;(a=I(".annotorious-editor-field",this.element)[0])&&a.remove();if(this.c.Aa&&Array.isArray(this.c.Aa)){var b=
this;y(this.c.Aa,function(a){b.Wb(a)})}};
function Ef(a,b){var c=!1;a.gb=b&&b instanceof Object&&b.enabled&&(c=Array.isArray(b.options))?!0:!1;a.gb?(df(a.ga,"d-none"),a.n?a.n.innerHTML="":(a.n=document.createElement("select"),a.n.classList.add("annotorious-editor-text")),c=b.options.slice(),c.unshift({value:""}),y(c,function(b){var c=new Option(b.value,b.value);if(b.id){var g=document.createAttribute("valueid");g.value=b.id;c.setAttributeNode(g)}a.n.appendChild(c)}),b.emptyOption||(a.n.options[0].disabled=!0,a.n.options[0].innerHTML=b.customLabel||
"\x3c--- Select one option ---\x3e"),Hb(a.n,a.Id)):(c||console.log("WARNING: invalid option format"),ef(a.ga,"d-none"),a.n&&(a.n.remove(),delete a.n))}Df.prototype.addField=Df.prototype.Wb;Df.prototype.getAnnotation=Df.prototype.Zd;function Ff(a,b,c){var d=this;c||(c="Click and Drag to Annotate");this.element=fe(Gf,{Fc:c});this.d=a;this.Nd=I(".annotorious-hint-msg",this.element)[0];this.Ld=I(".annotorious-hint-icon",this.element)[0];this.$c=function(){d.show()};this.Zc=function(){Hf(d)};this.Hb();Hf(this);b.appendChild(this.element)}
Ff.prototype.Hb=function(){var a=this;this.Pd=K(this.Ld,"mouseover",function(){a.show();window.clearTimeout(a.Yc)});this.Od=K(this.Ld,"mouseout",function(){Hf(a)});this.d.addHandler("onMouseOverItem",this.$c);this.d.addHandler("onMouseOutOfItem",this.Zc)};Ff.prototype.Za=function(){L(this.Pd);L(this.Od);this.d.wa("onMouseOverItem",this.$c);this.d.wa("onMouseOutOfItem",this.Zc)};
Ff.prototype.show=function(){window.clearTimeout(this.Yc);O(this.Nd,0.8);var a=this;this.Yc=window.setTimeout(function(){Hf(a)},3E3)};function Hf(a){window.clearTimeout(a.Yc);O(a.Nd,0)}Ff.prototype.destroy=function(){this.Za();delete this.Pd;delete this.Od;delete this.$c;delete this.Zc;Ib(this.element)};function If(a){this.element=fe(Bf);this.d=a;this.Ae=I(".annotorious-popup-text",this.element)[0];this.ba=I(".annotorious-popup-buttons",this.element)[0];this.Uc=!1;this.Nb=[];this.c={Aa:void 0};this.g=JSON.parse(JSON.stringify(this.c));var b=I(".annotorious-popup-button-edit",this.ba)[0],c=I(".annotorious-popup-button-delete",this.ba)[0];this.Xa=I(".annotorious-popup-button-move",this.ba)[0];this.Ya=I(".annotorious-popup-button-rotate",this.ba)[0];var d=this;K(b,"mouseover",function(){pb(b,"annotorious-popup-button-active")});
K(b,"mouseout",function(){rb(b,"annotorious-popup-button-active")});K(b,"click",function(){O(d.element,0);M(d.element,"pointer-events","none");a.jd(d.h)});K(c,"mouseover",function(){pb(c,"annotorious-popup-button-active")});K(c,"mouseout",function(){rb(c,"annotorious-popup-button-active")});K(c,"click",function(){a.fireEvent("beforeAnnotationRemoved",d.h)||(O(d.element,0),M(d.element,"pointer-events","none"),a.T(d.h),a.fireEvent("onAnnotationRemoved",d.h))});K(d.Xa,"mouseover",function(){pb(d.Xa,
"annotorious-popup-button-active")});K(d.Xa,"mouseout",function(){rb(d.Xa,"annotorious-popup-button-active")});K(d.Xa,"click",function(){O(d.element,0);M(d.element,"pointer-events","none");a.ud(d.h)});K(d.Ya,"mouseover",function(){pb(d.Ya,"annotorious-popup-button-active")});K(d.Ya,"mouseout",function(){rb(d.Ya,"annotorious-popup-button-active")});K(d.Ya,"click",function(){O(d.element,0);M(d.element,"pointer-events","none");a.yd(d.h)});Jf&&(K(this.element,"mouseover",function(){window.clearTimeout(d.Tc);
0.9>Ic(d.ba,"opacity")&&O(d.ba,0.9);d.clearHideTimer()}),K(this.element,"mouseout",function(){O(d.ba,0);d.startHideTimer()}),a.addHandler("onMouseOutOfItem",function(){d.startHideTimer()}));O(this.ba,0);O(this.element,0);M(this.element,"pointer-events","none");a.element.appendChild(this.element)}n=If.prototype;n.Wb=function(a){var b=Eb("div","annotorious-popup-field");q(a)?b.innerHTML=a:r(a)?this.Nb.push({Y:b,kd:a}):Kb(a)&&b.appendChild(a);this.element.appendChild(b)};
n.startHideTimer=function(){this.Uc=!1;if(!this.Tb){var a=this;this.Tb=window.setTimeout(function(){a.d.fireEvent("beforePopupHide",a);a.Uc||(O(a.element,0),M(a.element,"pointer-events","none"),O(a.ba,0.9),delete a.Tb)},150)}};n.clearHideTimer=function(){this.Uc=!0;this.Tb&&(window.clearTimeout(this.Tb),delete this.Tb)};
n.show=function(a,b){this.clearHideTimer();b&&this.setPosition(b);a&&this.setAnnotation(a);this.Tc&&window.clearTimeout(this.Tc);O(this.ba,0.9);if(Jf){var c=this;this.Tc=window.setTimeout(function(){O(c.ba,0)},1E3)}O(this.element,0.9);M(this.element,"pointer-events","auto");this.d.fireEvent("onPopupShown",this.h)};n.setPosition=function(a){Kc(this.element,new G(a.x,a.y))};
n.setAnnotation=function(a){this.h=a;this.Ae.innerHTML=a.text?a.text.replace(/\n/g,"\x3cbr/\x3e"):'\x3cspan class\x3d"annotorious-popup-empty"\x3eNo comment\x3c/span\x3e';"editable"in a&&!1==a.editable?R(this.ba,!1):R(this.ba,!0);"movable"in a&&!1==a.movable?R(this.Xa,!1):R(this.Xa,!0);"rotable"in a&&!1==a.rotable?R(this.Ya,!1):R(this.Ya,!0);y(this.Nb,function(b){var c=b.kd(a);q(c)?b.Y.innerHTML=c:Kb(c)&&(Gb(b.Y),b.Y.appendChild(c))})};
n.F=function(a){a instanceof Object&&0!==Object.keys(a).length?a.hasOwnProperty("extraFields")&&(this.c.Aa=a.extraFields):this.c=JSON.parse(JSON.stringify(this.g));(a=I(".annotorious-popup-field",this.element)[0])&&a.remove();if(this.c.Aa&&Array.isArray(this.c.Aa)){var b=this;y(this.c.Aa,function(a){b.Wb(a)})}};If.prototype.addField=If.prototype.Wb;function Kf(){}n=Kf.prototype;n.R=function(a,b){this.k.R(a,b)};n.fc=function(a,b){var c=this,d="pixel"==a.shapes[0].units?Rd(a.shapes[0],function(a){return Lf(c,a)}):Rd(a.shapes[0],function(a){return c.Ja(a)}),d=Pd(d);return this.ha(d.x,d.y).filter(function(c){return V(c.shapes[0])!=V(a.shapes[0])&&(!b||c.shapes[0].type==b)})};n.addHandler=function(a,b){this.O.addHandler(a,b)};n.wa=function(a){this.O.wa(a)};n.fireEvent=function(a,b,c){return this.O.fireEvent(a,b,c)};n.Ka=m("P");n.J=function(a){this.k.J(a)};
n.T=function(a){this.k.T(a)};n.wa=function(a,b){this.O.wa(a,b)};n.stopSelection=function(a){Jf&&R(this.f,!1);this.Vb&&(this.Vb(),delete this.Vb);this.P.stopSelection();a&&this.k.R(a)};
function Mf(a,b){K(b,Nf,function(c){c=Of(c,b);a.k.J(!1);var d=void 0;if(a.Ub){if(a.Kd){d=a.k.ha(c.x,c.y);if(!d.length)return;d=d.filter(function(a){return a.shapes[0].type==U});if(!d.length)return}R(a.f,!0);a.P.startSelection(c.x,c.y,d?a.k.B[V(d[0].shapes[0])]:void 0)}else d=a.k.ha(c.x,c.y),0<d.length&&a.k.J(d[0])})};function Pf(a,b){this.m=a;this.d=b;this.Wa=[];this.B=[];this.o=this.m.getContext("2d");this.ob=!0;this.pc=!1;this.e={enabled:!1,od:!1,mode:"active",color:"#2ECC71",strokeWidth:2,qc:!1,Mb:[],Wc:[],ze:0};this.Kb=Object.assign({},this.e);var c=this;K(this.m,Qf,function(a){var b=Rf(c.d,Of(a,c.m));c.ob?Sf(c,a,b):c.Ib=a;c.d.fireEvent("onMouseMoveOverItem",{cursor:b},a)});K(this.m,Nf,function(){c.Ga&&(c.d.fireEvent("onAnnotationMoved",c.Ga),c.Ga=void 0);c.eb&&(c.d.fireEvent("onAnnotationRotated",c.eb),c.eb=
void 0);c.e.enabled&&(c.e.qc=!0);void 0!==c.h&&!1!=c.h&&c.d.fireEvent("onAnnotationClicked",c.h)});b.addHandler("onMouseOutOfItem",function(){delete c.h;c.ob=!0});b.addHandler("beforePopupHide",function(){if(!c.ob&&c.Ib){var a=c.h;c.h=c.Fd(c.Ib.offsetX,c.Ib.offsetY);c.ob=!0;a!=c.h?(Tf(c),c.d.fireEvent("onMouseOutOfAnnotation",{I:a,mouseEvent:c.Ib}),c.d.fireEvent("onMouseOverAnnotation",{I:c.h,mouseEvent:c.Ib})):c.h&&c.d.popup.clearHideTimer()}else Tf(c)})}n=Pf.prototype;
n.R=function(a,b){b&&(b==this.h&&delete this.h,z(this.Wa,b),delete this.B[V(b.shapes[0])]);if(!this.B[V(a.shapes[0])]){this.Wa.push(a);var c=a.shapes[0],d=this;"pixel"==c.units?(c=Rd(c,function(a){return Lf(d.d,a)}),"fraction"==this.d.Lc&&(a.shapes[0]=Rd(c,function(a){return d.d.Va(a)}),a.shapes[0].units="fraction")):(c=Rd(c,function(a){return d.d.Ja(a)}),"pixel"==this.d.Lc&&(a.shapes[0]=Rd(c,function(a){return Rf(d.d,a)}),a.shapes[0].units="pixel"));this.B[V(a.shapes[0])]=c;Tf(this)}};
n.T=function(a){a==this.h&&delete this.h;z(this.Wa,a);delete this.B[V(a.shapes[0])];Tf(this)};n.ud=function(a){this.Ga=a;this.eb=void 0};n.yd=function(a){this.eb=a;this.Ga=void 0};n.M=function(){return Ha(this.Wa)};n.J=function(a){(this.h=a)?this.pc=!0:this.d.popup.startHideTimer();Tf(this);this.ob=!0};n.Fd=function(a,b){var c=this.ha(a,b);if(0<c.length)return c[0]};
n.ha=function(a,b){var c=[],d=this;y(this.Wa,function(e){Ld(d.B[V(e.shapes[0])],a,b)&&c.push(e)});Ka(c,function(a,b){var c=d.B[V(a.shapes[0])],k=d.B[V(b.shapes[0])];return Nd(c)-Nd(k)});return c};
function Sf(a,b,c){if(a.Ga||a.eb){if(a.h=a.Ga||a.eb,a.o.clearRect(0,0,a.m.width,a.m.height),y(a.Wa,function(b){b!=a.h&&Uf(a,a.B[V(b.shapes[0])])}),a.h){var d=a.B[V(a.h.shapes[0])];(c=Fa(a.d.Ba(),function(a){a=a.getSupportedShapeType();return Array.isArray(a)?-1!=Ba(a,d.type):a==d.type}))?a.Ga?Vf(c,a.o,d,b.offsetX,b.offsetY):console.error("Features to implement"):console.log("WARNING unsupported shape type: "+d.type)}}else{var e=a.Fd(b.offsetX,b.offsetY);e&&(a.pc=a.pc&&e==a.h);if(a.e.enabled&&a.e.qc){if(a.e.od&&
(a.e.lc||(a.e.lc=a.h||e),!a.h||!e||!Ld(a.B[V(a.e.lc.shapes[0])],b.offsetX,b.offsetY)))return;d=new Kd("point",new T(b.offsetX,b.offsetY),!1,{fill:a.e.color,strokeWidth:a.e.strokeWidth});b="pixel"==a.d.Lc?c:a.d.Va(d.geometry);a.e.Mb.push(b);"release"!=a.e.mode&&a.e.Wc.push(d);Uf(a,d)}else a.h?a.h==e&&a.pc||(a.ob=!1,a.d.popup.startHideTimer()):(a.h=e,Tf(a),a.d.fireEvent("onMouseOverAnnotation",{I:a.h,mouseEvent:b}))}}
function Uf(a,b,c){var d=Fa(a.d.Ba(),function(a){a=a.getSupportedShapeType();return Array.isArray(a)?-1!=Ba(a,b.type):a==b.type});d?d.drawShape(a.o,b,c):console.log("WARNING unsupported shape type: "+b.type)}
function Tf(a){if(!a.e.enabled||!a.e.qc){a.o.clearRect(0,0,a.m.width,a.m.height);y(a.Wa,function(b){b!=a.h&&Uf(a,a.B[V(b.shapes[0])])});if(a.h&&!a.Ga&&!a.eb){var b=a.B[V(a.h.shapes[0])];Uf(a,b,!0);b=Od(b).geometry;a.d.popup.show(a.h,new T(b.x,b.y+b.height+5))}"release"!=a.e.mode&&y(a.e.Wc,function(b){Uf(a,b)})}}
n.Cd=function(a){a instanceof Object&&0!==Object.keys(a).length?(this.e.enabled=a.enabled,this.e.od="boolean"===typeof a.insideAnno?a.insideAnno:this.Kb.od,"permanent"===a.mode||"release"===a.mode?this.e.mode=a.mode:"permanent"!==this.e.mode&&(this.e.mode=this.Kb.mode),this.e.color=a.color?a.color:this.Kb.color,this.e.strokeWidth=a.strokeWidth?a.strokeWidth:this.Kb.strokeWidth):(a=this.e.mode,this.e=Object.assign({Q:this.e.Q},this.Kb),"permanent"===a&&(this.e.mode=a));if(this.e.enabled){if(!this.e.Q){var b=
this;this.e.Q=K(this.m,Wf,function(){b.e.qc=!1;0<b.e.Mb.length&&b.d.fireEvent("onDrawnPixels",{drawnPixels:b.e.Mb,annotation:b.e.lc});b.e.Mb=[];b.e.lc=void 0;b.e.ze=0;"release"===b.e.mode&&Tf(b)})}this.d.Z()}else this.e.Q&&(L(this.e.Q),delete this.e.Q),"active"===this.e.mode&&(this.e.Wc=[],Tf(this)),this.e.Mb=[],this.d.ea()};var Xf="ontouchstart"in window,Jf=!Xf,Nf=Xf?"touchstart":"mousedown",Yf=Xf?"touchenter":"mouseover",Qf=Xf?"touchmove":"mousemove",Wf=Xf?"touchend":"mouseup",Zf=Xf?"touchleave":"mouseout";function Of(a,b){var c=!1;a.offsetX=a.offsetX?a.offsetX:!1;a.offsetY=a.offsetY?a.offsetY:!1;return c=a.offsetX&&a.offsetY||!a.C.changedTouches?{x:a.offsetX,y:a.offsetY}:{x:a.C.changedTouches[0].clientX-nd(b).left,y:a.C.changedTouches[0].clientY-nd(b).top}};function $f(){}n=$f.prototype;n.init=function(a,b){this.m=b;this.d=a;this.o=b.getContext("2d");this.$a=!1;this.c={outline:"#000000",outlineWidth:1,hiOutline:"#000000",hiOutlineWidth:1,stroke:"#ffffff",strokeWidth:1,hiStroke:"#fff000",hiStrokeWidth:1.2,fill:void 0,hiFill:void 0,maskTransparency:0.8,maskBorder:!0};this.g=Object.assign({},this.c);this.Sd=!1};
n.Hb=function(a,b){var c=this,d=this.m;this.bb=K(this.m,Qf,function(a){var g=Of(a,d);if(c.$a&&(!b||Ld(b,g.x,g.y))){c.W={x:g.x,y:g.y};c.o.clearRect(0,0,d.width,d.height);var h=c.W.x-c.V.x,k=c.W.y-c.V.y,g=Rf(c.d,g),l=Rf(c.d,{x:c.V.x,y:c.V.y,width:h,height:k});c.d.fireEvent("onMouseMoveOverItem",{cursor:g,box:l},a);c.Sd?(a=c.getViewportBounds(),k=Math.abs(k),h=Math.abs(h),c.o.lineWidth=c.o.lineWidth=c.c.strokeWidth,c.o.strokeStyle=c.c.stroke,c.o.fillStyle="rgba(0,0,0,0.45)",c.o.fillRect(0,0,c.m.width,
a.top),c.o.fillRect(a.right,a.top,c.m.width-a.right,k),c.o.fillRect(0,a.bottom,c.m.width,c.m.height-a.bottom),c.o.fillRect(0,a.top,a.left,k),c.o.strokeRect(a.left+0.5,a.top+0.5,h,k)):c.drawShape(c.o,{type:U,geometry:{x:0<h?c.V.x:c.W.x,y:0<k?c.V.y:c.W.y,width:Math.abs(h),height:Math.abs(k)},style:{}})}});this.cb=K(d,Wf,function(a){var b=Of(a,d),h=c.getShape();a=a.C?a.C:a;c.$a=!1;h?(c.Za(),c.d.fireEvent("onSelectionCompleted",{mouseEvent:a,shape:h,viewportBounds:c.getViewportBounds()})):(c.d.fireEvent("onSelectionCanceled"),
a=c.d.ha(b.x,b.y),0<a.length&&c.d.J(a[0]))})};n.Za=function(){this.bb&&(L(this.bb),delete this.bb);this.cb&&(L(this.cb),delete this.cb)};n.getName=aa("rect_drag");n.getSupportedShapeType=function(){return[U,"point"]};function ag(a,b){a.Sd=b}
n.F=function(a){a instanceof Object&&0!==Object.keys(a).length?(a.hasOwnProperty("outline")&&(this.c.outline=a.outline||this.g.outline),a.hasOwnProperty("outlineWidth")&&(this.c.outlineWidth=a.outlineWidth||this.g.outlineWidth),a.hasOwnProperty("hiOutline")&&(this.c.hiOutline=a.hiOutline||this.g.hiOutline),a.hasOwnProperty("hiOutlineWidth")&&(this.c.hiOutlineWidth=a.hiOutlineWidth||this.g.hiOutlineWidth),a.hasOwnProperty("stroke")&&(this.c.stroke=a.stroke||this.g.stroke),a.hasOwnProperty("strokeWidth")&&
(this.c.strokeWidth=a.strokeWidth||this.g.strokeWidth),a.hasOwnProperty("hiStroke")&&(this.c.hiStroke=a.hiStroke||this.g.hiStroke),a.hasOwnProperty("hiStrokeWidth")&&(this.c.hiStrokeWidth=a.hiStrokeWidth||this.g.hiStrokeWidth),a.hasOwnProperty("fill")&&(this.c.fill=a.fill||this.g.fill),a.hasOwnProperty("hiFill")&&(this.c.hiFill=a.hiFill||this.g.hiFill),a.hasOwnProperty("maskTransparency")&&(this.c.maskTransparency=a.maskTransparency||this.g.maskTransparency),a.hasOwnProperty("maskBorder")&&(this.c.maskBorder=
"boolean"===typeof a.maskBorder?a.maskBorder:this.g.maskBorder)):this.c=Object.assign({},this.g)};n.startSelection=function(a,b,c){var d={x:a,y:b};this.$a=!0;this.Hb(d,c);this.V=new T(a,b);this.d.fireEvent("onSelectionStarted",{offsetX:a,offsetY:b});M(document.body,"-webkit-user-select","none")};n.stopSelection=function(){this.Za();this.o.clearRect(0,0,this.m.width,this.m.height);M(document.body,"-webkit-user-select","auto");delete this.W};
n.getShape=function(){if(this.W&&3<Math.abs(this.W.x-this.V.x)&&3<Math.abs(this.W.y-this.V.y)){var a=this.getViewportBounds(),a=this.d.Va({x:a.left,y:a.top,width:a.right-a.left,height:a.bottom-a.top});return new Kd(U,a)}};n.getViewportBounds=function(){var a,b;this.W.x>this.V.x?(a=this.W.x,b=this.V.x):(a=this.V.x,b=this.W.x);var c,d;this.W.y>this.V.y?(c=this.V.y,d=this.W.y):(c=this.W.y,d=this.V.y);return{top:c,right:a,bottom:d,left:b}};
n.drawShape=function(a,b,c){var d=b.geometry,e,g,h,k,l;b.style||(b.style={});if(b.type==U){c?(g=b.style.hiFill||this.c.hiFill,e=b.style.hiStroke||this.c.hiStroke,h=b.style.hiOutline||this.c.hiOutline,k=b.style.hiOutlineWidth||this.c.hiOutlineWidth,l=b.style.hiStrokeWidth||this.c.hiStrokeWidth):(g=b.style.fill||this.c.fill,e=b.style.stroke||this.c.stroke,h=b.style.outline||this.c.outline,k=b.style.outlineWidth||this.c.outlineWidth,l=b.style.strokeWidth||this.c.strokeWidth);if(b.mask){if(!b.hasOwnProperty("_loadedMask")||
b._loadedMask.url!=b.mask){Object.defineProperty(b,"_loadedMask",{enumerable:!1,writable:!0});var s=this;b._loadedMask={Cc:new Image,url:b.mask};b._loadedMask.Cc.onload=function(){s.drawShape(a,b,c)};b._loadedMask.Cc.src=b.mask}if(b._loadedMask.Cc){a.globalAlpha=b.style.maskTransparency||this.c.maskTransparency;a.drawImage(b._loadedMask.Cc,d.x,d.y,d.width,d.height);a.globalAlpha=1;if(void 0!=b.style.maskBorder&&!b.style.maskBorder||void 0==b.style.maskBorder&&!this.c.maskBorder)return;d={x:d.x-l-
k,y:d.y-l-k,width:d.width+l+k,height:d.height+l+k}}}a.lineJoin="round";a.lineWidth=k;a.strokeStyle=h;a.strokeRect(d.x+k/2,d.y+k/2,d.width-k,d.height-k);a.lineJoin="miter";a.lineWidth=l;a.strokeStyle=e;a.strokeRect(d.x+k+l/2,d.y+k+l/2,d.width-2*k-l,d.height-2*k-l);g&&(a.lineJoin="miter",a.lineWidth=l,a.fillStyle=g,a.fillRect(d.x+k+l/2,d.y+k+l/2,d.width-2*k-l,d.height-2*k-l))}else"point"==b.type&&(g=b.style.fill||this.c.fill,l=b.style.strokeWidth||this.c.strokeWidth,a.beginPath(),a.fillStyle=g,a.arc(d.x,
d.y,l,0,l*Math.PI,!1),a.fill())};function Vf(a,b,c,d,e){d=new T(d,e);e=c.geometry;c.type==U&&(e.x=d.x-e.width/2,e.y=d.y-e.height/2,a.drawShape(b,c))};function Sd(a,b){this.arrowTail=a;this.arrowHead=b}function Md(a){var b,c;a.arrowHead.x>a.arrowTail.x?(b=a.arrowHead.x,c=a.arrowTail.x):(b=a.arrowTail.x,c=a.arrowHead.x);var d;a.arrowHead.y>a.arrowTail.y?(d=a.arrowTail.y,a=a.arrowHead.y):(d=a.arrowHead.y,a=a.arrowTail.y);return new zd(c,d,b-c,a+5-d)};function bg(){}n=bg.prototype;n.init=function(a,b){this.m=b;this.d=a;this.o=b.getContext("2d");this.$a=!1;this.c={arrowStroke:"#ffffff",arrowStrokeWidth:2,hiArrowStroke:"#fff000",hiArrowStrokeWidth:2.2,highlightTail:void 0,hiTailRadius:5,highlightHead:void 0,hiHeadRadius:5};this.g=Object.assign({},this.c)};
n.Hb=function(a,b){var c=this,d=this.m;this.bb=K(this.m,Qf,function(a){var g=Of(a,d);!c.$a||b&&!Ld(b,g.x,g.y)||(c.fa=new T(g.x,g.y),c.o.clearRect(0,0,d.width,d.height),g=Rf(c.d,g),c.d.fireEvent("onMouseMoveOverItem",{cursor:g},a),c.drawShape(c.o,{type:"arrow",geometry:new Sd(c.oa,c.fa),style:{}}))});this.cb=K(d,Wf,function(a){var b=Of(a,d),h=c.getShape();a=a.C?a.C:a;c.$a=!1;h?(c.Za(),c.d.fireEvent("onSelectionCompleted",{mouseEvent:a,shape:h,viewportBounds:c.getViewportBounds()})):(c.d.fireEvent("onSelectionCanceled"),
a=c.d.ha(b.x,b.y),0<a.length&&c.d.J(a[0]))})};n.Za=function(){this.bb&&(L(this.bb),delete this.bb);this.cb&&(L(this.cb),delete this.cb)};n.getName=aa("arrow_drag");n.getSupportedShapeType=aa("arrow");
n.F=function(a){a instanceof Object&&0!==Object.keys(a).length?(a.hasOwnProperty("arrowStroke")&&(this.c.arrowStroke=a.arrowStroke||this.g.arrowStroke),a.hasOwnProperty("arrowStrokeWidth")&&(this.c.arrowStrokeWidth=a.arrowStrokeWidth||this.g.arrowStrokeWidth),a.hasOwnProperty("hiArrowStroke")&&(this.c.hiArrowStroke=a.hiArrowStroke||this.g.hiArrowStroke),a.hasOwnProperty("hiArrowStrokeWidth")&&(this.c.hiArrowStrokeWidth=a.hiArrowStrokeWidth||this.g.hiArrowStrokeWidth),a.hasOwnProperty("highlightTail")&&
(this.c.highlightTail=a.highlightTail||this.g.highlightTail),a.hasOwnProperty("hiTailRadius")&&(this.c.hiTailRadius=a.hiTailRadius||this.g.hiTailRadius),a.hasOwnProperty("highlightHead")&&(this.c.highlightHead=a.highlightHead||this.g.highlightHead),a.hasOwnProperty("hiHeadRadius")&&(this.c.hiHeadRadius=a.hiHeadRadius||this.g.hiHeadRadius)):this.c=Object.assign({},this.g)};
n.startSelection=function(a,b,c){var d={x:a,y:b};this.$a=!0;this.Hb(d,c);this.oa=new T(a,b);this.d.fireEvent("onSelectionStarted",{offsetX:a,offsetY:b});M(document.body,"-webkit-user-select","none")};n.stopSelection=function(){this.Za();this.o.clearRect(0,0,this.m.width,this.m.height);M(document.body,"-webkit-user-select","auto");delete this.fa};n.getShape=function(){if(this.fa&&(5<Math.abs(this.fa.x-this.oa.x)||5<Math.abs(this.fa.y-this.oa.y)))return new Kd("arrow",new Sd(this.d.Va(this.oa),this.d.Va(this.fa)))};
n.getViewportBounds=function(){var a,b;this.fa.x>this.oa.x?(a=this.fa.x,b=this.oa.x):(a=this.oa.x,b=this.fa.x);var c,d;this.fa.y>this.oa.y?(c=this.oa.y,d=this.fa.y):(c=this.fa.y,d=this.oa.y);return{top:c,right:a,bottom:d+5,left:b}};
n.drawShape=function(a,b,c){b.style||(b.style={});if("arrow"==b.type){var d=b.geometry;c?(a.strokeStyle=a.fillStyle=b.style.hiArrowStroke||this.c.hiArrowStroke,a.lineWidth=b.style.hiArrowStrokeWidth||this.c.hiArrowStrokeWidth):(a.strokeStyle=a.fillStyle=b.style.arrowStroke||this.c.arrowStroke,a.lineWidth=b.style.arrowStrokeWidth||this.c.arrowStrokeWidth);c=Math.PI/5;var e=3*a.lineWidth,g=Math.sqrt((d.arrowHead.x-d.arrowTail.x)*(d.arrowHead.x-d.arrowTail.x)+(d.arrowHead.y-d.arrowTail.y)*(d.arrowHead.y-
d.arrowTail.y)),h=(g-e/3)/g,g=Math.round(d.arrowTail.x+(d.arrowHead.x-d.arrowTail.x)*h),h=Math.round(d.arrowTail.y+(d.arrowHead.y-d.arrowTail.y)*h);a.beginPath();a.moveTo(d.arrowTail.x,d.arrowTail.y);a.lineTo(g,h);a.stroke();var k=Math.atan2(d.arrowHead.y-d.arrowTail.y,d.arrowHead.x-d.arrowTail.x),g=Math.abs(e/Math.cos(c)),h=k+Math.PI+c,e=d.arrowHead.x+Math.cos(h)*g,h=d.arrowHead.y+Math.sin(h)*g,k=k+Math.PI-c;c=d.arrowHead.x+Math.cos(k)*g;g=d.arrowHead.y+Math.sin(k)*g;a.save();a.beginPath();a.moveTo(e,
h);a.lineTo(d.arrowHead.x,d.arrowHead.y);a.lineTo(c,g);a.beginPath();a.moveTo(e,h);a.lineTo(d.arrowHead.x,d.arrowHead.y);a.lineTo(c,g);a.lineTo(e,h);a.fill();if(b.style.highlightTail||this.c.highlightTail)a.beginPath(),a.arc(d.arrowTail.x,d.arrowTail.y,b.style.hiTailRadius||this.c.hiTailRadius,0,2*Math.PI,!1),a.fillStyle=b.style.highlightTail||this.c.highlightTail,a.fill();if(b.style.highlightHead||this.c.highlightHead)a.beginPath(),a.arc(d.arrowHead.x,d.arrowHead.y,b.style.hiHeadRadius||this.c.hiHeadRadius,
0,2*Math.PI,!1),a.fillStyle=b.style.highlightHead||this.c.highlightHead,a.fill();a.restore()}};function cg(a){return'\x3ccanvas class\x3d"annotorious-item annotorious-opacity-fade" style\x3d"position:absolute; top:0px; left:0px; width:'+xf(a.width)+"px; height:"+xf(a.height)+'px; z-index:0" width\x3d"'+xf(a.width)+'" height\x3d"'+xf(a.height)+'"\x3e\x3c/canvas\x3e'}
function Gf(a){return'\x3cdiv class\x3d"annotorious-hint" style\x3d"white-space:nowrap; position:absolute; top:0px; left:0px; pointer-events:none;"\x3e\x3cdiv class\x3d"annotorious-hint-msg annotorious-opacity-fade"\x3e'+xf(a.Fc)+'\x3c/div\x3e\x3cdiv class\x3d"annotorious-hint-icon" style\x3d"pointer-events:auto"\x3e\x3c/div\x3e\x3c/div\x3e'};function dg(a,b){this.D=a;this.Qd={padding:a.style.padding,margin:a.style.margin};this.Jd=void 0;this.Lc="fraction";this.O=new rd;this.Ha=[];this.Ub=!0;this.Kd=!1;this.H={enabled:!1,hd:!1,color:"#ffffff",strokeWidth:2};this.Lb=Object.assign({},this.H);this.element=Eb("div","annotorious-annotationlayer");M(this.element,"position","relative");M(this.element,"display","inline-block");eg(a,this.element);Jb(this.element,a);this.element.appendChild(a);var c=Vc(a);this.Vc=fe(cg,{width:c.width,height:c.height});
this.element.appendChild(this.Vc);this.xa=fe(cg,{width:c.width,height:c.height});Jf&&pb(this.xa,"annotorious-item-unfocus");this.element.appendChild(this.xa);this.f=fe(cg,{width:c.width,height:c.height});Jf&&R(this.f,!1);this.element.appendChild(this.f);this.popup=b?b:new If(this);c=new $f;this.sc(c);this.sc(new bg);this.P=c;this.editor=new Df(this);this.k=new Pf(this.xa,this);this.Pb=new Ff(this,this.element);var d=this;Jf&&(K(this.element,Yf,function(a){a=a.relatedTarget;a&&Mb(d.element,a)||(d.O.fireEvent("onMouseOverItem"),
tb(d.xa,"annotorious-item-unfocus","annotorious-item-focus"))}),K(this.element,Zf,function(a){a=a.relatedTarget;a&&Mb(d.element,a)||(d.O.fireEvent("onMouseOutOfItem"),tb(d.xa,"annotorious-item-focus","annotorious-item-unfocus"))}));Mf(this,Xf?this.f:this.xa);this.O.addHandler("onSelectionCompleted",function(a){var b=a.viewportBounds;d.editor.setPosition(new T(b.left+d.D.offsetLeft,b.bottom+4+d.D.offsetTop));d.editor.open(!1,a)});this.O.addHandler("onSelectionCanceled",function(){Jf&&R(d.f,!1);d.P.stopSelection()})}
t(dg,Kf);function eg(a,b){function c(c,d){M(b,"margin-"+c,d+"px");M(a,"margin-"+c,0);M(a,"padding-"+c,0)}var d=$c(a,"margin"),e=$c(a,"padding");0==d.top&&0==e.top||c("top",d.top+e.top);0==d.right&&0==e.right||c("right",d.right+e.right);0==d.bottom&&0==e.bottom||c("bottom",d.bottom+e.bottom);0==d.left&&0==e.left||c("left",d.left+e.left)}n=dg.prototype;n.ya=f();n.sc=function(a){a.init(this,this.f);this.Ha.push(a)};
n.destroy=function(){var a=this.D;a.style.margin=this.Qd.margin;a.style.padding=this.Qd.padding;Jb(a,this.element)};
n.jd=function(a){this.k.T(a);var b=Fa(this.Ha,function(b){b=b.getSupportedShapeType();return Array.isArray(b)?-1!=Ba(b,a.shapes[0].type):b==a.shapes[0].type}),c=a.shapes[0],d=this,c="pixel"==c.units?Rd(c,function(a){return Lf(d,a)}):Rd(c,function(a){return d.Ja(a)});if(b){R(this.f,!0);this.k.J(!1);var e=this.f.getContext("2d");b.drawShape(e,c)}b=Od(c).geometry;b=new T(b.x,b.y+b.height);this.editor.setPosition(new T(b.x+this.D.offsetLeft,b.y+4+this.D.offsetTop));this.editor.open(a)};n.ud=function(a){this.k.ud(a)};
n.yd=function(a){this.k.yd(a)};n.Ka=m("P");n.M=function(){return this.k.M()};n.ha=function(a,b){return Ha(this.k.ha(a,b))};n.Ba=m("Ha");n.getItem=function(){return{src:fg(this.D),element:this.D}};function fg(a){var b=a.getAttribute("data-original");return b?b:a.src}n.Ca=function(){R(this.xa,!1)};n.Z=function(){this.Ub=!1;this.Pb&&(this.Pb.destroy(),delete this.Pb)};
n.Oc=function(a){this.P=Fa(this.Ha,function(b){return b.getName()==a});return this.P?!0:(console.log('WARNING: selector "'+a+'" not available'),!1)};
n.F=function(a){a.hasOwnProperty("displayMessage")&&(this.Jd=a.displayMessage,this.Ub&&(this.Z(),this.ea()));a.hasOwnProperty("outputUnits")&&(this.Lc="pixel"==a.outputUnits?"pixel":"fraction");a.hasOwnProperty("drawInsideRectAnno")&&(this.Kd=a.drawInsideRectAnno);a.hasOwnProperty("colorMode")&&this.k.Cd(a.colorMode);a.hasOwnProperty("selectEditor")&&Ef(this.editor,a.selectEditor);a.hasOwnProperty("cursorAxes")&&gg(this,a.cursorAxes);a.hasOwnProperty("arrowMode")&&(a.arrowMode?this.Oc("arrow_drag"):
this.Oc("rect_drag"));a.hasOwnProperty("editor")&&this.editor.F(a.editor);a.hasOwnProperty("popup")&&this.popup.F(a.popup);a.hasOwnProperty("fancyBox")&&ag(Fa(this.Ha,function(a){return"rect_drag"==a.getName()}),a.fancyBox);a.hasOwnProperty("shapeStyle")&&(y(this.Ha,function(b){b.F(a.shapeStyle)}),Tf(this.k))};n.Ta=function(){R(this.xa,!0)};n.ea=function(){this.Ub=!0;this.Pb||(this.Pb=new Ff(this,this.element,this.Jd))};n.stopSelection=function(a){Jf&&R(this.f,!1);this.P.stopSelection();a&&this.k.R(a)};
n.Ja=function(a){var b=Tc(this.D),c={x:a.x*b.width,y:a.y*b.height};a.width&&(c.width=a.width*b.width,c.height=a.height*b.height);return c};function Lf(a,b){var c=Tc(a.D),d={x:parseInt(b.x/a.D.naturalWidth*c.width),y:parseInt(b.y/a.D.naturalHeight*c.height)};b.width&&(d.width=parseInt(b.width/a.D.naturalWidth*c.width),d.height=parseInt(b.height/a.D.naturalHeight*c.height));return d}
n.Va=function(a){var b=Tc(this.D),c={x:a.x/b.width,y:a.y/b.height};a.width&&(c.width=a.width/b.width,c.height=a.height/b.height);return c};function Rf(a,b){var c=Tc(a.D),d={x:parseInt(b.x*a.D.naturalWidth/c.width),y:parseInt(b.y*a.D.naturalHeight/c.height)};b.width&&(d.width=parseInt(b.width*a.D.naturalWidth/c.width),d.height=parseInt(b.height*a.D.naturalHeight/c.height));return d}
function gg(a,b){b instanceof Object&&0!==Object.keys(b).length?(b.hasOwnProperty("enabled")&&(a.H.enabled=b.enabled||a.Lb.enabled),b.hasOwnProperty("dash")&&(a.H.hd=b.dash||a.Lb.hd),b.hasOwnProperty("color")&&(a.H.color=b.color||a.Lb.color),b.hasOwnProperty("strokeWidth")&&(a.H.strokeWidth=b.strokeWidth||a.Lb.strokeWidth)):a.H=Object.assign({Q:a.H.Q},a.Lb);if(a.H.enabled){if(!a.H.Q){var c=a.Vc.getContext("2d"),d=function(b){b=Of(b,a.cf);c.clearRect(0,0,c.canvas.width,c.canvas.height);a.H.hd?c.setLineDash([5,
3]):(c.setLineDash([]),c.lineCap="square");c.strokeStyle=a.H.color;c.lineWidth=a.H.strokeWidth;c.beginPath();c.moveTo(0,b.y);c.lineTo(c.canvas.width,b.y);c.moveTo(b.x,0);c.lineTo(b.x,c.canvas.height);c.stroke()};a.H.Q=[];a.H.Q[0]=K(a.xa,Qf,d);a.H.Q[1]=K(a.f,Qf,d)}}else a.H.Q&&(y(a.H.Q,function(a){L(a)}),c=a.Vc.getContext("2d"),c.clearRect(0,0,c.canvas.width,c.canvas.height),delete a.H.Q)}dg.prototype.addSelector=dg.prototype.sc;dg.prototype.fireEvent=dg.prototype.fireEvent;
dg.prototype.setCurrentSelector=dg.prototype.Oc;dg.prototype.toItemCoordinates=dg.prototype.Va;function hg(){Vd(this,function(){return I("img.annotatable",document)})}t(hg,Ud);hg.prototype.zc=function(a){return fg(a)};hg.prototype.vd=function(a){return new dg(a)};hg.prototype.Pc=function(a){return Kb(a)?"IMG"==a.tagName:!1};function ig(a){return'\x3cdiv class\x3d"annotorious-opacity-fade" style\x3d"white-space:nowrap; position:absolute; pointer-events:none; top:80px; width:100%; text-align:center;"\x3e\x3cdiv class\x3d"annotorious-ol-hint" style\x3d"width: 400px; margin:0px auto;"\x3e'+xf(a.Fc)+"\x3c/div\x3e\x3c/div\x3e"};function jg(a,b){this.pa=a;this.d=b;this.la=Vc(b.element);this.t=b.popup;M(this.t.element,"z-index",99E3);this.K=[];this.B=[];this.mc=new OpenLayers.Layer.Boxes("Annotorious");this.pa.addLayer(this.mc);var c=this;this.pa.events.register("move",this.pa,function(){c.A&&c.Rb()});b.addHandler("beforePopupHide",function(){c.ab==c.A?c.t.clearHideTimer():c.fb(c.ab,c.A)})}n=jg.prototype;n.destroy=function(){this.mc.destroy()};
n.Rb=function(){var a=this.A.hc.div,b=Vc(a),c=Pc(a,this.pa.div),a=c.y,c=c.x,d=b.width,e=b.height,b=Vc(this.t.element),a={y:a+e+5};c+b.width>this.la.width?(tb(this.t.element,"top-left","top-right"),a.x=c+d-b.width):(tb(this.t.element,"top-right","top-left"),a.x=c);0>a.x&&(a.x=0);a.x+b.width>this.la.width&&(a.x=this.la.width-b.width);a.y+b.height>this.la.height&&(a.y=this.la.height-b.height);this.t.setPosition(a)};n.ad=function(a){this.t.setAnnotation(a);this.Rb();this.t.show()};
n.fb=function(a,b){a?(Pc(a.hc.div,this.pa.div),Ic(a.hc.div,"height"),M(a.gc,"border-color","#fff000"),this.A=a,this.ad(a.I)):delete this.A;b&&M(b.gc,"border-color","#fff")};
n.R=function(a){var b=a.shapes[0].geometry,b=new OpenLayers.Marker.Box(new OpenLayers.Bounds(b.x,b.y,b.x+b.width,b.y+b.height));pb(b.div,"annotorious-ol-boxmarker-outer");M(b.div,"border",null);var c=Eb("div","annotorious-ol-boxmarker-inner");Sc(c,"100%","100%");b.div.appendChild(c);var d={I:a,hc:b,gc:c},e=this;K(c,"mouseover",function(){e.A||e.fb(d);e.ab=d});K(c,"mouseout",function(){delete e.ab;e.t.startHideTimer()});this.K.push(d);c=a.shapes[0];"pixel"!=c.units&&(c=Rd(c,function(a){return e.d.Ja(a)}));
this.B[V(a.shapes[0])]=c;Ka(this.K,function(a,b){return Nd(b.I.shapes[0])-Nd(a.I.shapes[0])});var g=1E4;y(this.K,function(a){M(a.hc.div,"z-index",g);g++});this.mc.addMarker(b)};n.T=function(a){var b=Fa(this.K,function(b){return b.I==a});b&&(z(this.K,b),this.mc.removeMarker(b.hc))};n.M=function(){return Da(this.K,function(a){return a.I})};n.J=function(a){a||this.t.startHideTimer()};n.Fd=function(a,b){var c=this.ha(a,b);if(0<c.length)return c[0]};
n.ha=function(a,b){var c=[],d=this;y(this.K,function(e){e=e.I;Ld(d.B[V(e.shapes[0])],a,b)&&c.push(e)});Ka(c,function(a,b){var c=d.B[V(a.shapes[0])],k=d.B[V(b.shapes[0])];return Nd(c)-Nd(k)});return c};function kg(a){function b(){var a=parseInt(N(d.element,"width"),10),b=parseInt(N(d.element,"height"),10);Sc(d.f,a,b);d.f.width=a;d.f.height=b}this.pa=a;this.element=a.div;var c=Ic(this.element,"position");"absolute"!=c&&"relative"!=c&&M(this.element,"position","relative");this.O=new rd;this.na=fe(ig,{Fc:"Click and Drag"});M(this.na,"z-index",9998);O(this.na,0);this.element.appendChild(this.na);this.popup=new If(this);this.k=new jg(a,this);this.f=fe(cg,{width:"0",height:"0"});R(this.f,!1);M(this.f,
"position","absolute");M(this.f,"top","0px");M(this.f,"z-index",9999);this.element.appendChild(this.f);var d=this;b();this.P=new $f;this.P.init(this,this.f);this.Vb=void 0;this.editor=new Df(this);M(this.editor.element,"z-index",1E4);window.addEventListener?window.addEventListener("resize",b,!1):window.attachEvent&&window.attachEvent("onresize",b);K(this.element,"mouseover",function(a){(a=a.relatedTarget)&&Mb(d.element,a)||d.O.fireEvent("onMouseOverItem")});K(this.element,"mouseout",function(a){(a=
a.relatedTarget)&&Mb(d.element,a)||d.O.fireEvent("onMouseOutOfItem")});K(this.f,"mousedown",function(a){var b=Qc(d.element);d.P.startSelection(a.clientX-b.x,a.clientY-b.y)});this.O.addHandler("onSelectionCompleted",function(a){M(d.f,"pointer-events","none");a=a.viewportBounds;d.editor.setPosition(new T(a.left,a.bottom+4));d.editor.open()});this.O.addHandler("onSelectionCanceled",function(){d.stopSelection()})}t(kg,Kf);n=kg.prototype;n.ea=f();n.Z=f();
n.ya=function(a){M(this.f,"pointer-events","auto");var b=this;R(this.f,!0);O(this.na,0.8);window.setTimeout(function(){O(b.na,0)},2E3);a&&(this.Vb=a)};n.destroy=function(){this.k.destroy();Ib(this.na);Ib(this.f)};n.sc=f();n.jd=function(a){this.k.T(a);var b=this.P,c=this;if(b){R(this.f,!0);this.k.J(void 0);var d=this.f.getContext("2d"),e=Rd(a.shapes[0],function(a){return c.Ja(a)});console.log(e);b.drawShape(d,e);b=Od(e).geometry;this.editor.setPosition(new T(b.x,b.y+b.height));this.editor.open(a)}};
n.Ja=function(a){var b=this.pa.getViewPortPxFromLonLat(new OpenLayers.LonLat(a.x,a.y));return(a=a.width?this.pa.getViewPortPxFromLonLat(new OpenLayers.LonLat(a.x+a.width,a.y+a.height)):!1)?{x:b.x,y:a.y,width:a.x-b.x+2,height:b.y-a.y+2}:{x:b.x,y:b.y}};n.M=function(){return this.k.M()};n.ha=function(a,b){return Ha(this.k.ha(a,b))};n.Ba=f();n.getItem=function(){return{src:"map://openlayers/something"}};n.kc=f();
n.Va=function(a){var b=this.pa.getLonLatFromPixel(new OpenLayers.Pixel(a.x,a.y));return(a=a.width?new OpenLayers.Pixel(a.x+a.width-2,a.y+a.height-2):!1)?(a=this.pa.getLonLatFromPixel(a),b={x:b.lon,y:a.lat,width:a.lon-b.lon,height:b.lat-a.lat},console.log(b),b):{x:b.lon,y:b.lat}};function lg(){Vd(this)}t(lg,Ud);lg.prototype.zc=aa("map://openlayers/something");lg.prototype.vd=function(a){return new kg(a)};lg.prototype.Pc=function(a){return a instanceof OpenLayers.Map};function mg(a,b){this.ma=a;this.d=b;this.la=Vc(a.element);this.t=b.popup;M(this.t.element,"z-index",99E3);this.K=[];var c=this;this.ma.addHandler("animation",function(){c.A&&c.Rb()});b.addHandler("onPopupShown",function(){void 0!==c.A&&!1!=c.A&&c.d.fireEvent("onMouseOverAnnotation",c.A.I)});b.addHandler("beforePopupHide",function(){c.ab==c.A?c.t.clearHideTimer():(c.d.fireEvent("onMouseOutOfAnnotation",c.A.I),c.fb(c.ab,c.A))})}n=mg.prototype;
n.Rb=function(){var a=this.ma.element,b=this.A.Kc,c=Vc(b),b=Pc(b,a),a=b.y,b=b.x,d=c.width,e=c.height,c=Vc(this.t.element),a={x:b,y:a+e+12};tb(this.t.element,"top-right","top-left");this.ma.isFullPage()||(b+c.width>this.la.width&&(tb(this.t.element,"top-left","top-right"),a.x=b+d-c.width),0>a.x&&(a.x=0),a.x+c.width>this.la.width&&(a.x=this.la.width-c.width),a.y+c.height>this.la.height&&(a.y=this.la.height-c.height));this.t.setPosition(a)};n.ad=function(a){this.t.setAnnotation(a);this.Rb();this.t.show()};
n.fb=function(a,b){a?(M(a.gc,"border-color","#fff000"),this.A=a,this.ad(a.I)):delete this.A;b&&M(b.gc,"border-color","#fff")};
n.R=function(a){var b=a.shapes[0].geometry,c=Eb("div","annotorious-ol-boxmarker-outer"),d=Eb("div","annotorious-ol-boxmarker-inner");Sc(d,"100%","100%");c.appendChild(d);var b=new OpenSeadragon.Rect(b.x,b.y,b.width,b.height),e={I:a,Kc:c,gc:d},g=this;K(d,"mouseover",function(){g.A||g.fb(e);g.ab=e});K(d,"mouseout",function(){delete g.ab;g.t.startHideTimer()});this.K.push(e);Ka(this.K,function(a,b){return Nd(b.I.shapes[0])-Nd(a.I.shapes[0])});var h=1;y(this.K,function(a){M(a.Kc,"z-index",h);h++});this.ma.addOverlay(c,
b)};n.T=function(a){var b=Fa(this.K,function(b){return b.I==a});b&&(z(this.K,b),this.ma.removeOverlay(b.Kc))};n.M=function(){return Da(this.K,function(a){console.log(a);return a.I})};n.J=function(a){var b=this;a?y(this.K,function(c){c.I==a&&(b.A&&b.A!=c?b.fb(c,b.A):b.fb(c))}):this.t.startHideTimer()};n.destroy=function(){var a=this;y(this.K,function(b){a.ma.removeOverlay(b.Kc)});this.K=[]};function ng(a){this.element=a.element;M(Ab(),"z-index",0);this.ma=a;this.O=new rd;this.Ha=[];this.Ub=!0;this.na=fe(ig,{Fc:"Click and Drag"});O(this.na,0);this.element.appendChild(this.na);this.popup=new If(this);this.k=new mg(a,this);this.f=fe(cg,{width:"0",height:"0"});R(this.f,!1);this.element.appendChild(this.f);var b=this;(function(){var a=parseInt(N(b.element,"width"),10),d=parseInt(N(b.element,"height"),10);Sc(b.f,a,d);b.f.width=a;b.f.height=d})();a=new $f;a.init(this,this.f);this.Ha.push(a);
this.P=a;this.editor=new Df(this);Mf(this,this.f);this.O.addHandler("onSelectionCompleted",function(a){a=a.viewportBounds;b.editor.setPosition(new T(a.left,a.bottom+4));b.editor.open()});this.O.addHandler("onSelectionCanceled",function(){b.stopSelection()})}t(ng,Kf);n=ng.prototype;n.ea=f();n.Z=f();n.destroy=function(){this.k.destroy();delete this.k};n.ya=function(a){M(this.f,"pointer-events","auto");var b=this;R(this.f,!0);O(this.na,0.8);window.setTimeout(function(){O(b.na,0)},2E3);a&&(this.Vb=a)};
n.jd=function(a){this.k.T(a);var b=this.P,c=this;if(b){R(this.f,!0);this.k.J(void 0);var d=this.f.getContext("2d"),e=Rd(a.shapes[0],function(a){return c.Ja(a)});b.drawShape(d,e);b=Od(e).geometry;this.editor.setPosition(new T(b.x,b.y+b.height+4));this.editor.open(a)}};
n.Ja=function(a){var b=nd(this.element);b.top+=window.pageYOffset;b.left+=window.pageXOffset;var c=new OpenSeadragon.Point(a.x,a.y);a=a.width?new OpenSeadragon.Point(a.x+a.width,a.y+a.height):!1;c=this.ma.viewport.viewportToWindowCoordinates(c);return a?(a=this.ma.viewport.viewportToWindowCoordinates(a),{x:c.x-b.left,y:c.y-b.top,width:a.x-c.x+2,height:a.y-c.y+2}):c};n.M=function(){return this.k.M()};n.Ba=f();n.getItem=function(){return{src:"dzi://openseadragon/something"}};n.kc=f();n.Ka=m("P");
n.Va=function(a){var b=nd(this.element);b.top+=window.pageYOffset;b.left+=window.pageXOffset;var c=new OpenSeadragon.Point(a.x+b.left,a.y+b.top);a=a.width?new OpenSeadragon.Point(a.x+b.left+a.width-2,a.y+b.top+a.height-2):!1;c=this.ma.viewport.windowToViewportCoordinates(c);return a?(a=this.ma.viewport.windowToViewportCoordinates(a),{x:c.x,y:c.y,width:a.x-c.x,height:a.y-c.y}):c};function og(){Vd(this)}t(og,Ud);og.prototype.zc=aa("dzi://openseadragon/something");og.prototype.vd=function(a){return new ng(a)};og.prototype.Pc=function(a){return a instanceof OpenSeadragon.bf};function Y(){this.Md=!1;this.r=[new hg];window.OpenLayers&&this.r.push(new lg);window.OpenSeadragon&&this.r.push(new og);this.Sb=[];var a=this;od(function(){pg(a)})}function pg(a){a.Md||(y(a.r,function(a){a.init()}),y(a.Sb,function(b){b.initPlugin&&b.initPlugin(a);y(a.r,function(a){a.rc(b)})}),K(window,"resize",function(){a.reload()}),a.Md=!0)}function Z(a,b){return Fa(a.r,function(a){return ae(a,b)})}n=Y.prototype;
n.ya=function(a,b){var c=void 0,d=void 0;q(a)?(c=a,d=b):r(a)&&(d=a);if(c){var e=Z(this,c);e&&e.ya(c,d)}else y(this.r,function(a){a.ya(d)})};
n.R=function(a,b){if(a.src)if(a.shapes){var c=new Td(qd(a.src),a.text,a.shapes[0],a.created_at,a.textId,a.id);c.editable=a.editable;c.movable=a.movable;c.rotable=a.rotable;var d=Z(this,c.src);d&&d.R(c,b)}else console.error("Error: The shapes attribute is required and must necessarily include the type and geometry field. See the documentation for more details.",a);else console.error("Error: The src attribute is required for identification the image associated to annotation. See the documentation for more details.",
a)};n.Ce=function(a){if(Array.isArray(a)&&a.length){var b=this;a.forEach(function(a){b.R(a)})}};n.addHandler=function(a,b){y(this.r,function(c){c.addHandler(a,b)})};n.wa=function(a,b){y(this.r,function(c){c.wa(a,b)})};n.rc=function(a,b){try{var c=new window.annotorious.plugin[a](b);"complete"==document.readyState?(c.initPlugin&&c.initPlugin(this),y(this.r,function(a){a.rc(c)})):this.Sb.push(c)}catch(d){console.log("Could not load plugin: "+a)}};
n.destroy=function(a){if(a){var b=Z(this,a);b&&b.destroy(a)}else y(this.r,function(a){a.destroy()})};n.Ka=function(a){var b=Z(this,a);if(b)return b.Ka(a)};n.M=function(a){if(a){var b=Z(this,a);return b?b.M(a):[]}var c=[];y(this.r,function(a){Ia(c,a.M())});return c};n.Ba=function(a){var b=Z(this,a);return b?b.Ba(a):[]};n.Ca=function(a){if(a){var b=Z(this,a);b&&b.Ca(a)}else y(this.r,function(a){a.Ca()})};n.Z=function(a){if(a){var b=Z(this,a);b&&b.Z(a)}else y(this.r,function(a){a.Z()})};
n.stopSelection=function(a){if(a){var b=Z(this,a);b&&b.stopSelection(a)}else y(this.r,function(a){a.stopSelection()})};n.J=function(a){if(a){var b=Z(this,a.src);b&&b.J(a)}else y(this.r,function(a){a.J()})};n.rd=function(a){pg(this);var b=Fa(this.r,function(b){return b.Pc(a)});if(b)b.rd(a);else throw"Error: Annotorious does not support this media type in the current version or build configuration.";};n.Qa=function(a){var b=this;y(this.M(a),function(a){b.T(a)})};
n.T=function(a){var b=Z(this,a.src);b&&b.T(a)};n.reload=function(a){y(this.r,function(b){var c=b.M();a&&ce(b);b.destroy();b.init();y(c,function(a){b.R(a)})})};n.reset=function(){y(this.r,function(a){ce(a);a.destroy();a.init()})};n.kc=function(a,b){var c=Z(this,a);c&&c.kc(a,b)};n.F=function(a){y(this.r,function(b){b.F(a)})};n.Cd=function(a,b,c,d,e){this.F({colorMode:{enabled:a,insideAnno:b,mode:c,color:d,strokeWidth:e}})};
n.af=function(a,b,c,d){this.F({selectEditor:{enabled:a,options:b,emptyOption:c,customLabel:d}})};n.Ye=function(a,b,c,d){this.F({cursorAxes:{enabled:a,dash:b,color:c,strokeWidth:d}})};n.We=function(a){this.F({arrowMode:a})};n.$e=function(a){this.F({fancyBox:a})};n.fc=function(a,b){var c=Z(this,qd(a.src));return c?c.fc(a,b):[]};n.Xe=function(a){a?this.ea(void 0):this.Z(void 0)};n.Ta=function(a){if(a){var b=Z(this,a);b&&b.Ta(a)}else y(this.r,function(a){a.Ta()})};
n.ea=function(a){if(a){var b=Z(this,a);b&&b.ea(a)}else y(this.r,function(a){a.ea()})};window.anno=new Y;Y.prototype.activateSelector=Y.prototype.ya;Y.prototype.addAnnotation=Y.prototype.R;Y.prototype.addHandler=Y.prototype.addHandler;Y.prototype.addPlugin=Y.prototype.rc;Y.prototype.destroy=Y.prototype.destroy;Y.prototype.getActiveSelector=Y.prototype.Ka;Y.prototype.getAnnotations=Y.prototype.M;Y.prototype.getAvailableSelectors=Y.prototype.Ba;Y.prototype.hideAnnotations=Y.prototype.Ca;Y.prototype.hideSelectionWidget=Y.prototype.Z;Y.prototype.highlightAnnotation=Y.prototype.J;
Y.prototype.makeAnnotatable=Y.prototype.rd;Y.prototype.removeAll=Y.prototype.Qa;Y.prototype.removeAnnotation=Y.prototype.T;Y.prototype.reset=Y.prototype.reset;Y.prototype.setActiveSelector=Y.prototype.kc;Y.prototype.setProperties=Y.prototype.F;Y.prototype.showAnnotations=Y.prototype.Ta;Y.prototype.showSelectionWidget=Y.prototype.ea;window.annotorious||(window.annotorious={});window.annotorious.plugin||(window.annotorious.plugin={});
window.annotorious.geometry||(window.annotorious.geometry={},window.annotorious.geometry.expand=Qd,window.annotorious.geometry.getBoundingRect=Od);Y.prototype.setSelectionEnabled=Y.prototype.Xe;Y.prototype.reload=Y.prototype.reload;Y.prototype.addAnnotations=Y.prototype.Ce;Y.prototype.setColorMode=Y.prototype.Cd;Y.prototype.useSelectEditor=Y.prototype.af;Y.prototype.showCursorAxes=Y.prototype.Ye;Y.prototype.setArrowMode=Y.prototype.We;Y.prototype.useFancyBox=Y.prototype.$e;
Y.prototype.getIntersectedAnnotations=Y.prototype.fc;
